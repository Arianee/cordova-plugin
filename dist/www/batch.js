!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2);e.writeBatchLog=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=["[Batch]"].concat(Array.prototype.slice.call(arguments,1));!0===o.Consts.DevelopmentMode&&!0===t?console.debug.apply(console,i):!1===t&&console.log.apply(console,i)},e.sendToBridge=function(t,e,n){cordova.exec(t||function(){},function(){},o.Consts.BatchPluginName,"BA_"+e,null!=n?n:[{}])},e.isString=function(t){return t instanceof String||"string"==typeof t},e.isNumber=function(t){return t instanceof Number||"number"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.SetConfig="setConfig",t.Start="start",t.OptIn="optIn",t.OptOut="optOut",t.OptOutWipeData="optOutAndWipeData"}(e.Core||(e.Core={})),function(t){t.GetLastKnownPushToken="push.getLastKnownPushToken",t.SetIOSNotifTypes="push.setIOSNotifTypes",t.SetAndroidNotifTypes="push.setAndroidNotifTypes",t.Register="push.register",t.DismissNotifications="push.dismissNotifications",t.ClearBadge="push.clearBadge"}(e.Push||(e.Push={})),function(t){t.SetDoNotDisturbEnabled="messaging.setDoNotDisturbEnabled",t.ShowPendingMessage="messaging.showPendingMessage"}(e.Messaging||(e.Messaging={})),function(t){t.Fetch="inbox.fetch",t.FetchForUserID="inbox.fetchForUserIdentifier"}(e.Inbox||(e.Inbox={})),function(t){t.Edit="user.edit",t.TrackEvent="user.track.event",t.TrackTransaction="user.track.transaction",t.TrackLocation="user.track.location",t.DataDebug="user.data.debug",t.GetInstallationID="user.getInstallationID"}(e.User||(e.User={})),function(t){t.SetLanguage="SET_LANGUAGE",t.SetRegion="SET_REGION",t.SetIdentifier="SET_IDENTIFIER",t.SetAttribute="SET_ATTRIBUTE",t.RemoveAttribute="REMOVE_ATTRIBUTE",t.ClearAttribute="CLEAR_ATTRIBUTES",t.AddTag="ADD_TAG",t.RemoveTag="REMOVE_TAG",t.ClearTags="CLEAR_TAGS",t.ClearTagCollection="CLEAR_TAG_COLLECTION"}(e.UserDataOperation||(e.UserDataOperation={})),function(t){t.SetupCallback="_setupCallback"}(e.Internal||(e.Internal={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Consts={AttributeKeyRegexp:/^[a-zA-Z0-9_]{1,30}$/,AttributeStringMaxLength:64,BatchPluginName:"Batch",DevelopmentMode:!0},e.default=e.Consts},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={Android:"android",iOS:"ios",isCurrent:function(t){return cordova.platformId.toLowerCase()===t}};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i,r=n(1),a=n(0);!function(t){t[t.NONE=0]="NONE",t[t.SOUND=1]="SOUND",t[t.VIBRATE=2]="VIBRATE",t[t.LIGHTS=4]="LIGHTS",t[t.ALERT=8]="ALERT"}(o=e.AndroidNotificationTypes||(e.AndroidNotificationTypes={})),function(t){t[t.NONE=0]="NONE",t[t.BADGE=1]="BADGE",t[t.SOUND=2]="SOUND",t[t.ALERT=4]="ALERT"}(i=e.iOSNotificationTypes||(e.iOSNotificationTypes={}));var s=function(){function t(){this.AndroidNotificationTypes=o,this.iOSNotificationTypes=i}return t.prototype.registerForRemoteNotifications=function(){a.sendToBridge(null,r.Push.Register,null)},t.prototype.setAndroidNotificationTypes=function(t){"number"!=typeof t?a.writeBatchLog(!1,"notifTypes must be a number (of the AndroidNotificationTypes enum)"):a.sendToBridge(null,r.Push.SetAndroidNotifTypes,[{notifTypes:t}])},t.prototype.setiOSNotificationTypes=function(t){"number"==typeof t?a.sendToBridge(null,r.Push.SetIOSNotifTypes,[{notifTypes:t}]):a.writeBatchLog(!1,"notifTypes must be a number (of the iOSNotificationTypes enum)")},t.prototype.clearBadge=function(){a.sendToBridge(null,r.Push.ClearBadge,null)},t.prototype.dismissNotifications=function(){a.sendToBridge(null,r.Push.DismissNotifications,null)},t.prototype.getLastKnownPushToken=function(t){a.sendToBridge(t,r.Push.GetLastKnownPushToken,null)},t}();e.PushModule=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(1),r=n(0);!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CAMPAIGN=1]="CAMPAIGN",t[t.TRANSACTIONAL=2]="TRANSACTIONAL"}(o=e.InboxNotificationSource||(e.InboxNotificationSource={}));var a=function(){function t(){this.NotificationSource=o}return t.prototype.fetchNotifications=function(t){var e=this;r.sendToBridge(function(n){e.handleFetchCallback(n,t)},i.Inbox.Fetch,null)},t.prototype.fetchNotificationsForUserIdentifier=function(t,e,n){var o=this;r.sendToBridge(function(t){o.handleFetchCallback(t,n)},i.Inbox.FetchForUserID,[{id:t,auth:e}])},t.prototype.handleFetchCallback=function(t,e){var n,o=this;if("function"!=typeof e)throw new Error("callback is a required parameter, and must be a function");try{n=JSON.parse(t)}catch(t){return void e(new Error("Internal bridge error"),void 0)}if(r.isString(n.error))e(new Error(n.error));else{var i=n.notifications;if(Array.isArray(i)){var a=[];i.forEach(function(t){try{a.push(o.parseBridgeNotification(t))}catch(t){}}),e(void 0,a)}else e(new Error("Internal error: malformed notifications"))}},t.prototype.parseBridgeNotification=function(t){if("object"!=typeof t)throw new Error("Raw notification is not an object");var e=t.body;if(!r.isString(t.body))throw new Error("An Inbox Notification must at least have a body");var n=t.identifier;if(!r.isString(t.identifier))throw new Error("An Inbox Notification must at least have an identifier");var i=t.date;if(!r.isNumber(i))throw new Error("An Inbox Notification must at least have a date");var a=t.is_unread;if("boolean"!=typeof a)throw new Error("An Inbox Notification must at least have a read flag");var s=t.source;if(!r.isNumber(s))throw new Error("An Inbox Notification must at least have a source");s!==o.CAMPAIGN&&s!==o.TRANSACTIONAL&&s!==o.UNKNOWN&&(s=o.UNKNOWN);var u={body:e,date:new Date(i),identifier:n,isUnread:a,payload:{},source:s};return r.isString(t.ios_attachment_url)&&(u.iOSAttachmentURL=t.ios_attachment_url),"object"==typeof t.payload&&(u.payload=t.payload),r.isString(t.title)&&(u.title=t.title),u},t}();e.InboxModule=a},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var actions_1=__webpack_require__(1),consts_1=__webpack_require__(2),helpers_1=__webpack_require__(0),CallbackAction;!function(t){t.Log="_log",t.Eval="_eval",t.DispatchPush="_dispatchPush",t.DispatchMessagingEvent="_dispatchMessagingEvent",t.OnBridgeFailure="onBridgeFailure"}(CallbackAction=exports.CallbackAction||(exports.CallbackAction={}));var CallbackHandler=function(){function CallbackHandler(){}return CallbackHandler.prototype.setup=function(){cordova.exec(this.handleCallback,function(){},consts_1.Consts.BatchPluginName,actions_1.Internal.SetupCallback,[{}])},CallbackHandler.prototype.handleCallback=function(callbackData){switch(callbackData.action!==CallbackAction.Log&&helpers_1.writeBatchLog(!0,"Got callback from Batch",callbackData),callbackData.action){case CallbackAction.DispatchPush:var pushPayload=callbackData.payload;for(var key in pushPayload)if(pushPayload.hasOwnProperty(key)){var value=pushPayload[key];if("string"==typeof value)try{pushPayload[key]=JSON.parse(value),"object"!=typeof pushPayload[key]&&(pushPayload[key]=value)}catch(t){}else"number"!=typeof value&&"boolean"!=typeof value||(pushPayload[key]=String(value))}var hasLandingMessage=!1;!0===callbackData.hasLandingMessage&&(hasLandingMessage=!0),cordova.fireDocumentEvent("batchPushReceived",{hasLandingMessage:hasLandingMessage,payload:pushPayload});break;case CallbackAction.DispatchMessagingEvent:var lifecycleEventName=callbackData.lifecycleEvent,publicEventName=void 0;if("shown"==lifecycleEventName)publicEventName="batchMessageShown";else{if("closed"!=lifecycleEventName){helpers_1.writeBatchLog(!0,"Unknown messaging lifecycle event, can't forward",callbackData.lifecycleEvent);break}publicEventName="batchMessageClosed"}var payload={};helpers_1.isString(callbackData.messageIdentifier)&&(payload.messageIdentifier=callbackData.messageIdentifier),cordova.fireDocumentEvent(publicEventName,payload);break;case CallbackAction.Log:console.log(callbackData.message);break;case CallbackAction.Eval:eval(callbackData.command);break;case CallbackAction.OnBridgeFailure:helpers_1.writeBatchLog(!1,"Internal Bridge error",callbackData.result)}},CallbackHandler}();exports.CallbackHandler=CallbackHandler},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=n(4),r=function(){function t(){}return t.prototype.setDoNotDisturbEnabled=function(t){},t.prototype.showPendingMessage=function(){},t}(),a=function(){function t(){this.AndroidNotificationTypes=i.AndroidNotificationTypes,this.iOSNotificationTypes=i.iOSNotificationTypes}return t.prototype.registerForRemoteNotifications=function(){},t.prototype.setAndroidNotificationTypes=function(t){},t.prototype.setiOSNotificationTypes=function(t){},t.prototype.clearBadge=function(){},t.prototype.dismissNotifications=function(){},t.prototype.getLastKnownPushToken=function(t){},t}(),s=function(){function t(){}return t.prototype.getInstallationID=function(t){},t.prototype.getEditor=function(){return new c},t.prototype.printDebugInformation=function(){},t.prototype.trackEvent=function(t,e,n){},t.prototype.trackTransaction=function(t,e){},t.prototype.trackLocation=function(t){},t}(),u=function(){function t(){this.NotificationSource=o.InboxNotificationSource}return t.prototype.fetchNotifications=function(t){},t.prototype.fetchNotificationsForUserIdentifier=function(t,e,n){},t}(),c=function(){function t(){}return t.prototype.setLanguage=function(t){return this},t.prototype.setRegion=function(t){return this},t.prototype.setIdentifier=function(t){return this},t.prototype.setAttribute=function(t,e){return this},t.prototype.removeAttribute=function(t){return this},t.prototype.clearAttributes=function(){return this},t.prototype.addTag=function(t,e){return this},t.prototype.removeTag=function(t,e){return this},t.prototype.clearTags=function(){return this},t.prototype.clearTagCollection=function(t){return this},t.prototype.save=function(){return this},t}(),l=function(){function t(){this.push=new a,this.user=new s,this.messaging=new r,this.inbox=new u}return t.prototype.on=function(t,e){},t.prototype.off=function(t){},t.prototype.setConfig=function(t){},t.prototype.start=function(){console.log("Batch is not supported in this environement")},t.prototype.optIn=function(){},t.prototype.optOut=function(){},t.prototype.optOutAndWipeData=function(){},t}();e.default=l},function(t,e,n){"use strict";var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),a=n(0),s=i(n(2)),u=function(){function t(){}return t.prototype.getInstallationID=function(t){a.sendToBridge(t,r.User.GetInstallationID,null)},t.prototype.getEditor=function(){return new c(!0)},t.prototype.printDebugInformation=function(){a.sendToBridge(null,r.User.DataDebug,null)},t.prototype.trackEvent=function(t,e,n){if(a.isString(t)&&s.default.AttributeKeyRegexp.test(t||"")){var o={name:t};if(a.isString(e)){if(0===e.length||e.length>s.default.AttributeStringMaxLength)return void a.writeBatchLog(!1,"BatchUserDataEditor - Label can't be longer than "+s.default.AttributeStringMaxLength+" characters. Ignoring event '"+t+"'.");o.label=e}else if(null!=e&&void 0!==e)return void a.writeBatchLog(!1,"BatchUser - If supplied, label argument must be a string. Ignoring event '"+t+"'.");"object"==typeof n&&(o.data=n),a.sendToBridge(null,r.User.TrackEvent,[o])}else a.writeBatchLog(!1,"BatchUser - Invalid event name. Please make sure that the name is made of letters, underscores and numbers only (a-zA-Z0-9_). It also can't be longer than 30 characters. Ignoring event '"+t+"'")},t.prototype.trackTransaction=function(t,e){if(void 0!==t)if(a.isNumber(t)&&!isNaN(t)){var n={amount:t};"object"==typeof e&&(n.data=e),a.sendToBridge(null,r.User.TrackTransaction,[n])}else a.writeBatchLog(!1,"BatchUser - Amount must be a valid number. Ignoring transaction.");else a.writeBatchLog(!1,"BatchUser - Amount must be a valid number. Ignoring transaction.")},t.prototype.trackLocation=function(t){"object"==typeof t?"number"!=typeof t.latitude||isNaN(t.latitude)?a.writeBatchLog(!1,"BatchUser - Invalid latitude. Skipping."):"number"!=typeof t.longitude||isNaN(t.longitude)?a.writeBatchLog(!1,"BatchUser - Invalid longitude. Skipping."):!t.precision||"number"==typeof t.precision&&!isNaN(t.precision)?!t.date||t.date instanceof Date?a.sendToBridge(null,r.User.TrackLocation,[{date:t.date?t.date.getTime():void 0,latitude:t.latitude,longitude:t.longitude,precision:t.precision}]):a.writeBatchLog(!1,"BatchUser - Invalid date. Skipping."):a.writeBatchLog(!1,"BatchUser - Invalid precision. Skipping."):a.writeBatchLog(!1,"BatchUser - Invalid trackLocation argument. Skipping.")},t}();e.UserModule=u;var c=function(){function t(t){if(!0!==t)throw new Error("Do not instanciate BatchUserDataEditor yourself: use batch.user.getEditor()");this._operationQueue=[]}return t.prototype.setLanguage=function(t){return"string"!=typeof t&&null!==t?(a.writeBatchLog(!1,"BatchUserDataEditor - Language must be a string or null"),this):(this._enqueueOperation(r.UserDataOperation.SetLanguage,{value:t}),this)},t.prototype.setRegion=function(t){return"string"!=typeof t&&null!==t?(a.writeBatchLog(!1,"BatchUserDataEditor - Region must be a string or null"),this):(this._enqueueOperation(r.UserDataOperation.SetRegion,{value:t}),this)},t.prototype.setIdentifier=function(t){return"string"!=typeof t&&null!==t?(a.writeBatchLog(!1,"BatchUserDataEditor - Identifier must be a string or null"),this):(this._enqueueOperation(r.UserDataOperation.SetIdentifier,{value:t}),this)},t.prototype.setAttribute=function(t,e){if(!s.default.AttributeKeyRegexp.test(t||""))return a.writeBatchLog(!1,"BatchUserDataEditor - Invalid key. Please make sure that the key is made of letters, underscores and numbers only (a-zA-Z0-9_). It also can't be longer than 30 characters. Ignoring attribute '"+t+"'"),this;if(void 0===t||null===t)return a.writeBatchLog(!1,"BatchUserDataEditor - Value argument cannot be undefined or null"),this;if(void 0===e)return a.writeBatchLog(!1,"BatchUserDataEditor - A value is required"),this;var n={value:e,key:t,type:""};if(e instanceof Date)n.value=e.getTime(),n.type="date";else if(a.isNumber(e)){if(isNaN(e))return a.writeBatchLog(!1,"BatchUserDataEditor - Value cannot be NaN"),this;n.type=e%1==0?"integer":"float"}else if(a.isString(e)){if(0===e.length||e.length>s.default.AttributeStringMaxLength)return a.writeBatchLog(!1,"BatchUserDataEditor - String attributes can't be empty or longer than "+s.default.AttributeStringMaxLength+" characters. Ignoring attribute '"+t+"'."),this;n.type="string"}else{if(!(e instanceof Boolean||"boolean"==typeof e))return a.writeBatchLog(!1,"BatchUserDataEditor - Value argument must be one of these types: number, string, boolean, date"),this;n.type="boolean"}return this._enqueueOperation(r.UserDataOperation.SetAttribute,n),this},t.prototype.removeAttribute=function(t){return s.default.AttributeKeyRegexp.test(t||"")?(this._enqueueOperation(r.UserDataOperation.RemoveAttribute,{key:t}),this):(a.writeBatchLog(!1,"BatchUserDataEditor - Invalid key. Please make sure that the key is made of letters, underscores and numbers only (a-zA-Z0-9_). It also can't be longer than 30 characters. Ignoring attribute '"+t+"'"),this)},t.prototype.clearAttributes=function(){return this._enqueueOperation(r.UserDataOperation.ClearAttribute,{}),this},t.prototype.addTag=function(t,e){return a.isString(t)?s.default.AttributeKeyRegexp.test(t||"")?void 0===e?(a.writeBatchLog(!1,"BatchUserDataEditor - A tag is required"),this):a.isString(e)?0===e.length||e.length>s.default.AttributeStringMaxLength?(a.writeBatchLog(!1,"BatchUserDataEditor - Tags can't be empty or longer than "+s.default.AttributeStringMaxLength+" characters. Ignoring tag '"+e+"'."),this):(this._enqueueOperation(r.UserDataOperation.AddTag,{collection:t,tag:e}),this):(a.writeBatchLog(!1,"BatchUserDataEditor - Tag argument must be a string"),this):(a.writeBatchLog(!1,"BatchUserDataEditor - Invalid collection. Please make sure that the collection is made of letters, underscores and numbers only (a-zA-Z0-9_). It also can't be longer than 30 characters. Ignoring collection '"+t+"'"),this):(a.writeBatchLog(!1,"BatchUserDataEditor - Collection argument must be a string"),this)},t.prototype.removeTag=function(t,e){if("string"!=typeof t&&!(t instanceof String))return a.writeBatchLog(!1,"BatchUserDataEditor - Collection argument must be a string"),this;if(!s.default.AttributeKeyRegexp.test(t||""))return a.writeBatchLog(!1,"BatchUserDataEditor - Invalid collection. Please make sure that the collection is made of letters, underscores and numbers only (a-zA-Z0-9_). It also can't be longer than 30 characters. Ignoring collection '"+t+"'"),this;if(void 0===e)return a.writeBatchLog(!1,"BatchUserDataEditor - A tag is required"),this;if(a.isString(e)){if(0===e.length||e.length>s.default.AttributeStringMaxLength)return a.writeBatchLog(!1,"BatchUserDataEditor - Tags can't be empty or longer than "+s.default.AttributeStringMaxLength+" characters. Ignoring tag '"+e+"'."),this}else a.writeBatchLog(!1,"BatchUserDataEditor - Tag argument must be a string");return this._enqueueOperation(r.UserDataOperation.RemoveTag,{collection:t,tag:e}),this},t.prototype.clearTags=function(){return this._enqueueOperation(r.UserDataOperation.ClearTags,{}),this},t.prototype.clearTagCollection=function(t){return"string"!=typeof t?(a.writeBatchLog(!1,"BatchUserDataEditor - Collection argument must be a string"),this):s.default.AttributeKeyRegexp.test(t||"")?(this._enqueueOperation(r.UserDataOperation.ClearTagCollection,{collection:t}),this):(a.writeBatchLog(!1,"BatchUserDataEditor - Invalid collection. Please make sure that the collection is made of letters, underscores and numbers only (a-zA-Z0-9_). It also can't be longer than 30 characters. Ignoring collection '"+t+"'"),this)},t.prototype.save=function(){return a.sendToBridge(null,r.User.Edit,[{operations:this._operationQueue}]),this._operationQueue=[],this},t.prototype._enqueueOperation=function(t,e){var n=o({operation:t},e);this._operationQueue.push(n)},t}();e.BatchUserDataEditor=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(0),r=function(){function t(){}return t.prototype.setDoNotDisturbEnabled=function(t){"boolean"==typeof t?i.sendToBridge(null,o.Messaging.SetDoNotDisturbEnabled,[{enabled:t}]):i.writeBatchLog(!1,"Batch.Messaging - setDoNotDisturbEnabled: parameter must be a boolean")},t.prototype.showPendingMessage=function(){i.sendToBridge(null,o.Messaging.ShowPendingMessage,null)},t}();e.MessagingModule=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=function(){function t(){this._eventListeners={}}return t.prototype.on=function(t,e){return"string"!=typeof t?(o.writeBatchLog(!1,"Event name must be a string if supplied"),this):(this._eventListeners[t]=this._eventListeners[t]||[],this._eventListeners[t].push(e),this)},t.prototype.off=function(t){return void 0===t?(this._eventListeners={},this):"string"!=typeof t?(o.writeBatchLog(!1,"Event name must be a string if supplied"),this):(this._eventListeners[t]=[],this)},t.prototype.emit=function(t,e){o.writeBatchLog(!0,"Calling back developer implementation - "+t,e),(this._eventListeners[t]||[]).forEach(function(n){n(t,e)})},t}();e.EventEmitter=i},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(10),a=n(0),s=n(5),u=n(9),c=n(4),l=n(8),f=o(n(3)),p=function(){function t(){this.push=new c.PushModule,this.user=new l.UserModule,this.messaging=new u.MessagingModule,this.inbox=new s.InboxModule,this._config=null,this._eventEmitter=new r.EventEmitter}return t.prototype.on=function(t,e){this._eventEmitter.on(t,e)},t.prototype.off=function(t){this._eventEmitter.off(t)},t.prototype.setConfig=function(t){if("object"==typeof t){var e={androidAPIKey:null,canUseAdvertisingIdentifier:!0,iOSAPIKey:null};for(var n in t)e.hasOwnProperty(n)?e[n]=t[n]:this.log(!1,"Unknown key found in the config object : "+n);this._config=e}else a.writeBatchLog(!1,"Config must be an object.")},t.prototype.start=function(){if(null===this._config)return a.writeBatchLog(!1,"You must call setConfig before calling start."),this;var t=f.default.isCurrent(f.default.Android)?this._config.androidAPIKey:this._config.iOSAPIKey;"string"==typeof t?(a.sendToBridge(null,i.Core.SetConfig,[{APIKey:t,useAndroidID:!1,useIDFA:!0===this._config.canUseAdvertisingIdentifier}]),a.sendToBridge(null,i.Core.Start,null)):a.writeBatchLog(!1,"No API key was specified for the current platform.")},t.prototype.optIn=function(){a.sendToBridge(null,i.Core.OptIn,null)},t.prototype.optOut=function(){a.sendToBridge(null,i.Core.OptOut,null)},t.prototype.optOutAndWipeData=function(){a.sendToBridge(null,i.Core.OptOutWipeData,null)},t.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.writeBatchLog.apply(void 0,[t].concat(e))},t}();e.default=p},function(t,e,n){"use strict";var o,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=i(n(11)),a=i(n(7)),s=n(6),u=i(n(3));u.default.isCurrent(u.default.iOS)||u.default.isCurrent(u.default.Android)?(o=new r.default,(new s.CallbackHandler).setup()):o=new a.default,t.exports=o}]));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN0cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGxhdGZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvcHVzaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9pbmJveC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2FsbGJhY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2JhdGNoU3R1Yi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy91c2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL21lc3NhZ2luZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZXZlbnRFbWl0dGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9iYXRjaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNvbnN0c18xIiwid3JpdGVCYXRjaExvZyIsImRlYnVnIiwibWVzc2FnZSIsIl9pIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsImNvbmNhdCIsIkFycmF5Iiwic2xpY2UiLCJDb25zdHMiLCJEZXZlbG9wbWVudE1vZGUiLCJjb25zb2xlIiwiYXBwbHkiLCJsb2ciLCJzZW5kVG9CcmlkZ2UiLCJjYWxsYmFjayIsIm1ldGhvZCIsImNvcmRvdmEiLCJleGVjIiwiQmF0Y2hQbHVnaW5OYW1lIiwiaXNTdHJpbmciLCJTdHJpbmciLCJpc051bWJlciIsIk51bWJlciIsIkNvcmUiLCJQdXNoIiwiTWVzc2FnaW5nIiwiSW5ib3giLCJVc2VyIiwiVXNlckRhdGFPcGVyYXRpb24iLCJJbnRlcm5hbCIsIkF0dHJpYnV0ZUtleVJlZ2V4cCIsIkF0dHJpYnV0ZVN0cmluZ01heExlbmd0aCIsImRlZmF1bHQiLCJQbGF0Zm9ybSIsIkFuZHJvaWQiLCJpT1MiLCJpc0N1cnJlbnQiLCJwbGF0Zm9ybSIsInBsYXRmb3JtSWQiLCJ0b0xvd2VyQ2FzZSIsIkFuZHJvaWROb3RpZmljYXRpb25UeXBlcyIsImlPU05vdGlmaWNhdGlvblR5cGVzIiwiYWN0aW9uc18xIiwiaGVscGVyc18xIiwiUHVzaE1vZHVsZSIsInRoaXMiLCJyZWdpc3RlckZvclJlbW90ZU5vdGlmaWNhdGlvbnMiLCJSZWdpc3RlciIsInNldEFuZHJvaWROb3RpZmljYXRpb25UeXBlcyIsIm5vdGlmVHlwZXMiLCJTZXRBbmRyb2lkTm90aWZUeXBlcyIsInNldGlPU05vdGlmaWNhdGlvblR5cGVzIiwiU2V0SU9TTm90aWZUeXBlcyIsImNsZWFyQmFkZ2UiLCJDbGVhckJhZGdlIiwiZGlzbWlzc05vdGlmaWNhdGlvbnMiLCJEaXNtaXNzTm90aWZpY2F0aW9ucyIsImdldExhc3RLbm93blB1c2hUb2tlbiIsInJlc3VsdENhbGxiYWNrIiwiR2V0TGFzdEtub3duUHVzaFRva2VuIiwiSW5ib3hOb3RpZmljYXRpb25Tb3VyY2UiLCJJbmJveE1vZHVsZSIsIk5vdGlmaWNhdGlvblNvdXJjZSIsImZldGNoTm90aWZpY2F0aW9ucyIsIl90aGlzIiwicmVzIiwiaGFuZGxlRmV0Y2hDYWxsYmFjayIsIkZldGNoIiwiZmV0Y2hOb3RpZmljYXRpb25zRm9yVXNlcklkZW50aWZpZXIiLCJ1c2VySWRlbnRpZmllciIsImF1dGhlbnRpY2F0aW9uS2V5IiwiRmV0Y2hGb3JVc2VySUQiLCJpZCIsImF1dGgiLCJyYXdSZXNwb25zZSIsInVzZXJDYWxsYmFjayIsInJlc3BvbnNlIiwiRXJyb3IiLCJKU09OIiwicGFyc2UiLCJlIiwidW5kZWZpbmVkIiwiZXJyb3IiLCJyYXdOb3RpZmljYXRpb25zIiwibm90aWZpY2F0aW9ucyIsImlzQXJyYXkiLCJmb3JFYWNoIiwicmF3Tm90aWYiLCJwdXNoIiwicGFyc2VCcmlkZ2VOb3RpZmljYXRpb24iLCJub3RpZiIsImJvZHkiLCJpZGVudGlmaWVyIiwicmF3RGF0ZSIsImRhdGUiLCJpc1VucmVhZCIsImlzX3VucmVhZCIsInNvdXJjZSIsIkNBTVBBSUdOIiwiVFJBTlNBQ1RJT05BTCIsIlVOS05PV04iLCJwYXJzZWROb3RpZiIsIkRhdGUiLCJwYXlsb2FkIiwiaW9zX2F0dGFjaG1lbnRfdXJsIiwiaU9TQXR0YWNobWVudFVSTCIsInRpdGxlIiwiQ2FsbGJhY2tBY3Rpb24iLCJDYWxsYmFja0hhbmRsZXIiLCJzZXR1cCIsImhhbmRsZUNhbGxiYWNrIiwiU2V0dXBDYWxsYmFjayIsImNhbGxiYWNrRGF0YSIsImFjdGlvbiIsIkxvZyIsIkRpc3BhdGNoUHVzaCIsInB1c2hQYXlsb2FkIiwia2V5IiwiZXJyIiwiaGFzTGFuZGluZ01lc3NhZ2UiLCJmaXJlRG9jdW1lbnRFdmVudCIsIkRpc3BhdGNoTWVzc2FnaW5nRXZlbnQiLCJsaWZlY3ljbGVFdmVudE5hbWUiLCJsaWZlY3ljbGVFdmVudCIsInB1YmxpY0V2ZW50TmFtZSIsIm1lc3NhZ2VJZGVudGlmaWVyIiwiRXZhbCIsImV2YWwiLCJjb21tYW5kIiwiT25CcmlkZ2VGYWlsdXJlIiwicmVzdWx0IiwiaW5ib3hfMSIsInB1c2hfMSIsIk1lc3NhZ2luZ1N0dWIiLCJzZXREb05vdERpc3R1cmJFbmFibGVkIiwiZW5hYmxlZCIsInNob3dQZW5kaW5nTWVzc2FnZSIsIlB1c2hTdHViIiwiVXNlclN0dWIiLCJnZXRJbnN0YWxsYXRpb25JRCIsImdldEVkaXRvciIsIkJhdGNoVXNlckRhdGFFZGl0b3JTdHViIiwicHJpbnREZWJ1Z0luZm9ybWF0aW9uIiwidHJhY2tFdmVudCIsImxhYmVsIiwiZGF0YSIsInRyYWNrVHJhbnNhY3Rpb24iLCJhbW91bnQiLCJ0cmFja0xvY2F0aW9uIiwibG9jYXRpb24iLCJJbmJveFN0dWIiLCJzZXRMYW5ndWFnZSIsImxhbmd1YWdlIiwic2V0UmVnaW9uIiwicmVnaW9uIiwic2V0SWRlbnRpZmllciIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImNsZWFyQXR0cmlidXRlcyIsImFkZFRhZyIsImNvbGxlY3Rpb24iLCJ0YWciLCJyZW1vdmVUYWciLCJjbGVhclRhZ3MiLCJjbGVhclRhZ0NvbGxlY3Rpb24iLCJzYXZlIiwiQmF0Y2hTdHViIiwidXNlciIsIm1lc3NhZ2luZyIsImluYm94Iiwib24iLCJldmVudCIsImxpc3RlbmVyIiwib2ZmIiwic2V0Q29uZmlnIiwiY29uZmlnIiwic3RhcnQiLCJvcHRJbiIsIm9wdE91dCIsIm9wdE91dEFuZFdpcGVEYXRhIiwiX19pbXBvcnREZWZhdWx0IiwiVXNlck1vZHVsZSIsIkdldEluc3RhbGxhdGlvbklEIiwiQmF0Y2hVc2VyRGF0YUVkaXRvciIsIkRhdGFEZWJ1ZyIsInRlc3QiLCJwYXJhbWV0ZXJzIiwiVHJhY2tFdmVudCIsImlzTmFOIiwiVHJhY2tUcmFuc2FjdGlvbiIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwicHJlY2lzaW9uIiwiVHJhY2tMb2NhdGlvbiIsImdldFRpbWUiLCJmcm9tU2RrIiwiX29wZXJhdGlvblF1ZXVlIiwiX2VucXVldWVPcGVyYXRpb24iLCJTZXRMYW5ndWFnZSIsIlNldFJlZ2lvbiIsIlNldElkZW50aWZpZXIiLCJvcGVyYXRpb25EYXRhIiwidHlwZSIsIkJvb2xlYW4iLCJTZXRBdHRyaWJ1dGUiLCJSZW1vdmVBdHRyaWJ1dGUiLCJDbGVhckF0dHJpYnV0ZSIsIkFkZFRhZyIsIlJlbW92ZVRhZyIsIkNsZWFyVGFncyIsIkNsZWFyVGFnQ29sbGVjdGlvbiIsIkVkaXQiLCJvcGVyYXRpb25zIiwib3BlcmF0aW9uIiwib3BlcmF0aW9uT2JqZWN0IiwiX19hc3NpZ24iLCJNZXNzYWdpbmdNb2R1bGUiLCJTZXREb05vdERpc3R1cmJFbmFibGVkIiwiU2hvd1BlbmRpbmdNZXNzYWdlIiwiRXZlbnRFbWl0dGVyIiwiX2V2ZW50TGlzdGVuZXJzIiwiZW1pdCIsImV2ZW50RW1pdHRlcl8xIiwibWVzc2FnaW5nXzEiLCJ1c2VyXzEiLCJwbGF0Zm9ybV8xIiwiQmF0Y2giLCJfY29uZmlnIiwiX2V2ZW50RW1pdHRlciIsImJhc2VDb25maWciLCJhbmRyb2lkQVBJS2V5IiwiY2FuVXNlQWR2ZXJ0aXNpbmdJZGVudGlmaWVyIiwiaU9TQVBJS2V5IiwiYXBpS2V5IiwiU2V0Q29uZmlnIiwiQVBJS2V5IiwidXNlQW5kcm9pZElEIiwidXNlSURGQSIsIlN0YXJ0IiwiT3B0SW4iLCJPcHRPdXQiLCJPcHRPdXRXaXBlRGF0YSIsImJhdGNoSW1wbCIsImJhdGNoXzEiLCJiYXRjaFN0dWJfMSIsImNhbGxiYWNrXzEiXSwibWFwcGluZ3MiOiI2REFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBMkNBLE9BdENBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBakIsR0FDQVksT0FBQUMsZUFB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QVl5TixPQUFRLE9BR2xDZCxFQUFBek8sVUFBQTBMLGtCQUFQLFdBQ0V4SSxFQUFBOUIsYUFBYSxLQUFNNkIsRUFBQW5CLEtBQVkwTixlQUFnQixPQUd6Q2YsRUFBQXpPLFVBQUFtQixJQUFSLFNBQVliLE9BQWdCLElBQUFLLEtBQUFILEVBQUEsRUFBQUEsRUFBQUMsVUFBQUMsT0FBQUYsSUFBQUcsRUFBQUgsRUFBQSxHQUFBQyxVQUFBRCxHQUMxQjBDLEVBQUE3QyxjQUFhYSxXQUFBLEdBQUNaLEdBQUtNLE9BQUtELEtBRTVCOE4sRUFoR0EsaURDSklnQixrRkFMSkMsRUFBQS9ELEVBQUFwTixFQUFBLEtBQ0FvUixFQUFBaEUsRUFBQXBOLEVBQUEsSUFDQXFSLEVBQUFyUixFQUFBLEdBQ0FpUSxFQUFBN0MsRUFBQXBOLEVBQUEsSUFHSWlRLEVBQUFqTSxRQUFTSSxVQUFVNkwsRUFBQWpNLFFBQVNHLE1BQVE4TCxFQUFBak0sUUFBU0ksVUFBVTZMLEVBQUFqTSxRQUFTRSxVQUNsRWdOLEVBQVksSUFBSUMsRUFBQW5OLFNBRWhCLElBQUlxTixFQUFBekksaUJBQWtCQyxTQUV0QnFJLEVBQVksSUFBSUUsRUFBQXBOLFFBR2xCN0QsRUFBQUQsUUFBU2dSIiwiZmlsZSI6ImJhdGNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMik7XG4iLCJpbXBvcnQgKiBhcyBBY3Rpb25zIGZyb20gXCIuL2FjdGlvbnNcIjtcbmltcG9ydCB7IENvbnN0cyB9IGZyb20gXCIuL2NvbnN0c1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gd3JpdGVCYXRjaExvZyhkZWJ1ZzogYm9vbGVhbiwgLi4ubWVzc2FnZTogYW55W10pIHtcbiAgY29uc3QgYXJncyA9IFtcIltCYXRjaF1cIl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICBpZiAoQ29uc3RzLkRldmVsb3BtZW50TW9kZSA9PT0gdHJ1ZSAmJiBkZWJ1ZyA9PT0gdHJ1ZSkge1xuICAgIGNvbnNvbGUuZGVidWcuYXBwbHkoY29uc29sZSwgYXJncyk7XG4gIH0gZWxzZSBpZiAoZGVidWcgPT09IGZhbHNlKSB7XG4gICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRUb0JyaWRnZShcbiAgY2FsbGJhY2s6ICgocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQpIHwgbnVsbCxcbiAgbWV0aG9kOlxuICAgIHwgQWN0aW9ucy5Db3JlXG4gICAgfCBBY3Rpb25zLlB1c2hcbiAgICB8IEFjdGlvbnMuTWVzc2FnaW5nXG4gICAgfCBBY3Rpb25zLkluYm94XG4gICAgfCBBY3Rpb25zLlVzZXJcbiAgICB8IEFjdGlvbnMuVXNlckRhdGFPcGVyYXRpb25cbiAgICB8IEFjdGlvbnMuSW50ZXJuYWwsXG4gIGFyZ3M6IGFueVtdIHwgbnVsbFxuKSB7XG4gIC8vIFRoZSBCcmlkZ2UgbmV2ZXIgZmFpbHMgYXMgZmFyIGFzIENvcmRvdmEgaXMgY29uY2VybmVkLCBidXQgdGhlIGNhbGxiYWNrIGNhbiBoYXZlIGEgbmVnYXRpdmUgcmVzcG9uc2VcbiAgLy8gSXQgd2lsbCBuZWVkIHRvIGJlIGhhbmRsZWQgb24gYSBwZXItY2FzZSBiYXNpc1xuICBjb3Jkb3ZhLmV4ZWMoXG4gICAgY2FsbGJhY2sgfHwgKCgpID0+IHt9KSxcbiAgICAoKSA9PiB7fSxcbiAgICBDb25zdHMuQmF0Y2hQbHVnaW5OYW1lLFxuICAgIFwiQkFfXCIgKyBtZXRob2QsXG4gICAgYXJncyAhPSBudWxsID8gYXJncyA6IFt7fV1cbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBzdHJpbmcge1xuICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmcgfHwgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIodmFsdWU6IGFueSk6IHZhbHVlIGlzIG51bWJlciB7XG4gIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIE51bWJlciB8fCB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCI7XG59XG4iLCJleHBvcnQgZW51bSBDb3JlIHtcbiAgU2V0Q29uZmlnID0gXCJzZXRDb25maWdcIixcbiAgU3RhcnQgPSBcInN0YXJ0XCIsXG4gIE9wdEluID0gXCJvcHRJblwiLFxuICBPcHRPdXQgPSBcIm9wdE91dFwiLFxuICBPcHRPdXRXaXBlRGF0YSA9IFwib3B0T3V0QW5kV2lwZURhdGFcIlxufVxuXG5leHBvcnQgZW51bSBQdXNoIHtcbiAgR2V0TGFzdEtub3duUHVzaFRva2VuID0gXCJwdXNoLmdldExhc3RLbm93blB1c2hUb2tlblwiLFxuICBTZXRJT1NOb3RpZlR5cGVzID0gXCJwdXNoLnNldElPU05vdGlmVHlwZXNcIixcbiAgU2V0QW5kcm9pZE5vdGlmVHlwZXMgPSBcInB1c2guc2V0QW5kcm9pZE5vdGlmVHlwZXNcIixcbiAgUmVnaXN0ZXIgPSBcInB1c2gucmVnaXN0ZXJcIixcbiAgRGlzbWlzc05vdGlmaWNhdGlvbnMgPSBcInB1c2guZGlzbWlzc05vdGlmaWNhdGlvbnNcIixcbiAgQ2xlYXJCYWRnZSA9IFwicHVzaC5jbGVhckJhZGdlXCJcbn1cblxuZXhwb3J0IGVudW0gTWVzc2FnaW5nIHtcbiAgU2V0RG9Ob3REaXN0dXJiRW5hYmxlZCA9IFwibWVzc2FnaW5nLnNldERvTm90RGlzdHVyYkVuYWJsZWRcIixcbiAgU2hvd1BlbmRpbmdNZXNzYWdlID0gXCJtZXNzYWdpbmcuc2hvd1BlbmRpbmdNZXNzYWdlXCJcbn1cblxuZXhwb3J0IGVudW0gSW5ib3gge1xuICBGZXRjaCA9IFwiaW5ib3guZmV0Y2hcIixcbiAgRmV0Y2hGb3JVc2VySUQgPSBcImluYm94LmZldGNoRm9yVXNlcklkZW50aWZpZXJcIlxufVxuXG5leHBvcnQgZW51bSBVc2VyIHtcbiAgRWRpdCA9IFwidXNlci5lZGl0XCIsXG4gIFRyYWNrRXZlbnQgPSBcInVzZXIudHJhY2suZXZlbnRcIixcbiAgVHJhY2tUcmFuc2FjdGlvbiA9IFwidXNlci50cmFjay50cmFuc2FjdGlvblwiLFxuICBUcmFja0xvY2F0aW9uID0gXCJ1c2VyLnRyYWNrLmxvY2F0aW9uXCIsXG4gIERhdGFEZWJ1ZyA9IFwidXNlci5kYXRhLmRlYnVnXCIsXG4gIEdldEluc3RhbGxhdGlvbklEID0gXCJ1c2VyLmdldEluc3RhbGxhdGlvbklEXCJcbn1cblxuZXhwb3J0IGVudW0gVXNlckRhdGFPcGVyYXRpb24ge1xuICBTZXRMYW5ndWFnZSA9IFwiU0VUX0xBTkdVQUdFXCIsXG4gIFNldFJlZ2lvbiA9IFwiU0VUX1JFR0lPTlwiLFxuICBTZXRJZGVudGlmaWVyID0gXCJTRVRfSURFTlRJRklFUlwiLFxuICBTZXRBdHRyaWJ1dGUgPSBcIlNFVF9BVFRSSUJVVEVcIixcbiAgUmVtb3ZlQXR0cmlidXRlID0gXCJSRU1PVkVfQVRUUklCVVRFXCIsXG4gIENsZWFyQXR0cmlidXRlID0gXCJDTEVBUl9BVFRSSUJVVEVTXCIsXG4gIEFkZFRhZyA9IFwiQUREX1RBR1wiLFxuICBSZW1vdmVUYWcgPSBcIlJFTU9WRV9UQUdcIixcbiAgQ2xlYXJUYWdzID0gXCJDTEVBUl9UQUdTXCIsXG4gIENsZWFyVGFnQ29sbGVjdGlvbiA9IFwiQ0xFQVJfVEFHX0NPTExFQ1RJT05cIlxufVxuXG5leHBvcnQgZW51bSBJbnRlcm5hbCB7XG4gIFNldHVwQ2FsbGJhY2sgPSBcIl9zZXR1cENhbGxiYWNrXCJcbn1cbiIsImV4cG9ydCBjb25zdCBDb25zdHMgPSB7XG4gIEF0dHJpYnV0ZUtleVJlZ2V4cDogL15bYS16QS1aMC05X117MSwzMH0kLyxcbiAgQXR0cmlidXRlU3RyaW5nTWF4TGVuZ3RoOiA2NCxcbiAgQmF0Y2hQbHVnaW5OYW1lOiBcIkJhdGNoXCIsXG4gIERldmVsb3BtZW50TW9kZTogdHJ1ZVxufTtcblxuZXhwb3J0IGRlZmF1bHQgQ29uc3RzO1xuIiwiY29uc3QgUGxhdGZvcm0gPSB7XG4gIEFuZHJvaWQ6IFwiYW5kcm9pZFwiLFxuICBpT1M6IFwiaW9zXCIsXG4gIGlzQ3VycmVudDogKHBsYXRmb3JtOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gY29yZG92YS5wbGF0Zm9ybUlkLnRvTG93ZXJDYXNlKCkgPT09IHBsYXRmb3JtO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQbGF0Zm9ybTtcbiIsIi8qIHRzbGludDpkaXNhYmxlOm5vLWJpdHdpc2UgKi9cblxuaW1wb3J0IHsgUHVzaCBhcyBQdXNoQWN0aW9ucyB9IGZyb20gXCIuLi9hY3Rpb25zXCI7XG5pbXBvcnQgeyBzZW5kVG9CcmlkZ2UsIHdyaXRlQmF0Y2hMb2cgfSBmcm9tIFwiLi4vaGVscGVyc1wiO1xuXG4vKipcbiAqIEFuZHJvaWQgTm90aWZpY2F0aW9uIFR5cGVzIGVudW0uXG4gKi9cbmV4cG9ydCBlbnVtIEFuZHJvaWROb3RpZmljYXRpb25UeXBlcyB7XG4gIE5PTkUgPSAwLFxuICBTT1VORCA9IDEgPDwgMCxcbiAgVklCUkFURSA9IDEgPDwgMSxcbiAgTElHSFRTID0gMSA8PCAyLFxuICBBTEVSVCA9IDEgPDwgM1xufVxuXG4vKipcbiAqIGlPUyBOb3RpZmljYXRpb24gVHlwZXMgZW51bS5cbiAqL1xuZXhwb3J0IGVudW0gaU9TTm90aWZpY2F0aW9uVHlwZXMge1xuICBOT05FID0gMCxcbiAgQkFER0UgPSAxIDw8IDAsXG4gIFNPVU5EID0gMSA8PCAxLFxuICBBTEVSVCA9IDEgPDwgMlxufVxuXG5leHBvcnQgY2xhc3MgUHVzaE1vZHVsZSBpbXBsZW1lbnRzIFB1c2hNb2R1bGUge1xuICBwdWJsaWMgQW5kcm9pZE5vdGlmaWNhdGlvblR5cGVzOiB0eXBlb2YgQW5kcm9pZE5vdGlmaWNhdGlvblR5cGVzO1xuICBwdWJsaWMgaU9TTm90aWZpY2F0aW9uVHlwZXM6IHR5cGVvZiBpT1NOb3RpZmljYXRpb25UeXBlcztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLkFuZHJvaWROb3RpZmljYXRpb25UeXBlcyA9IEFuZHJvaWROb3RpZmljYXRpb25UeXBlcztcbiAgICB0aGlzLmlPU05vdGlmaWNhdGlvblR5cGVzID0gaU9TTm90aWZpY2F0aW9uVHlwZXM7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJGb3JSZW1vdGVOb3RpZmljYXRpb25zKCk6IHZvaWQge1xuICAgIHNlbmRUb0JyaWRnZShudWxsLCBQdXNoQWN0aW9ucy5SZWdpc3RlciwgbnVsbCk7XG4gIH1cblxuICBwdWJsaWMgc2V0QW5kcm9pZE5vdGlmaWNhdGlvblR5cGVzKG5vdGlmVHlwZXM6IGFueSk6IHZvaWQge1xuICAgIGlmICh0eXBlb2Ygbm90aWZUeXBlcyAhPT0gXCJudW1iZXJcIikge1xuICAgICAgd3JpdGVCYXRjaExvZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFwibm90aWZUeXBlcyBtdXN0IGJlIGEgbnVtYmVyIChvZiB0aGUgQW5kcm9pZE5vdGlmaWNhdGlvblR5cGVzIGVudW0pXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbmRUb0JyaWRnZShudWxsLCBQdXNoQWN0aW9ucy5TZXRBbmRyb2lkTm90aWZUeXBlcywgW3sgbm90aWZUeXBlcyB9XSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldGlPU05vdGlmaWNhdGlvblR5cGVzKG5vdGlmVHlwZXM6IGFueSk6IHZvaWQge1xuICAgIGlmICh0eXBlb2Ygbm90aWZUeXBlcyAhPT0gXCJudW1iZXJcIikge1xuICAgICAgd3JpdGVCYXRjaExvZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFwibm90aWZUeXBlcyBtdXN0IGJlIGEgbnVtYmVyIChvZiB0aGUgaU9TTm90aWZpY2F0aW9uVHlwZXMgZW51bSlcIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VuZFRvQnJpZGdlKG51bGwsIFB1c2hBY3Rpb25zLlNldElPU05vdGlmVHlwZXMsIFt7IG5vdGlmVHlwZXMgfV0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjbGVhckJhZGdlKCk6IHZvaWQge1xuICAgIHNlbmRUb0JyaWRnZShudWxsLCBQdXNoQWN0aW9ucy5DbGVhckJhZGdlLCBudWxsKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNtaXNzTm90aWZpY2F0aW9ucygpOiB2b2lkIHtcbiAgICBzZW5kVG9CcmlkZ2UobnVsbCwgUHVzaEFjdGlvbnMuRGlzbWlzc05vdGlmaWNhdGlvbnMsIG51bGwpO1xuICB9XG5cbiAgcHVibGljIGdldExhc3RLbm93blB1c2hUb2tlbihyZXN1bHRDYWxsYmFjazogKHRva2VuOiBzdHJpbmcpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBzZW5kVG9CcmlkZ2UocmVzdWx0Q2FsbGJhY2ssIFB1c2hBY3Rpb25zLkdldExhc3RLbm93blB1c2hUb2tlbiwgbnVsbCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEluYm94IGFzIEluYm94QWN0aW9ucyB9IGZyb20gXCIuLi9hY3Rpb25zXCI7XG5pbXBvcnQgeyBpc051bWJlciwgaXNTdHJpbmcsIHNlbmRUb0JyaWRnZSB9IGZyb20gXCIuLi9oZWxwZXJzXCI7XG5cbi8qKlxuICogSW5ib3ggTm90aWZpY2F0aW9uIFNvdXJjZSBlbnVtLlxuICogQSBub3RpZmljYXRpb24gc291cmNlIHJlcHJlc2VudHMgaG93IHRoZSBwdXNoIHdhcyBzZW50IGZyb20gQmF0Y2g6IHZpYSB0aGUgVHJhbnNhY3Rpb25hbCBBUEksIG9yIHVzaW5nIGEgUHVzaCBDYW1wYWlnblxuICpcbiAqIFRvIGJlIHVzZWQgd2l0aCBiYXRjaC5pbmJveCBmZXRjaGVkIG5vdGlmaWNhdGlvbnMuXG4gKi9cbmV4cG9ydCBlbnVtIEluYm94Tm90aWZpY2F0aW9uU291cmNlIHtcbiAgVU5LTk9XTiA9IDAsXG4gIENBTVBBSUdOID0gMSxcbiAgVFJBTlNBQ1RJT05BTCA9IDJcbn1cblxuZXhwb3J0IGNsYXNzIEluYm94TW9kdWxlIGltcGxlbWVudHMgSW5ib3hNb2R1bGUge1xuICBwdWJsaWMgTm90aWZpY2F0aW9uU291cmNlOiB0eXBlb2YgSW5ib3hOb3RpZmljYXRpb25Tb3VyY2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5Ob3RpZmljYXRpb25Tb3VyY2UgPSBJbmJveE5vdGlmaWNhdGlvblNvdXJjZTtcbiAgfVxuXG4gIHB1YmxpYyBmZXRjaE5vdGlmaWNhdGlvbnMoXG4gICAgY2FsbGJhY2s6IChcbiAgICAgIGVycm9yPzogRXJyb3IsXG4gICAgICBub3RpZmljYXRpb25zPzogQmF0Y2hTREsuSW5ib3hOb3RpZmljYXRpb25bXVxuICAgICkgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBzZW5kVG9CcmlkZ2UoXG4gICAgICByZXMgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUZldGNoQ2FsbGJhY2socmVzLCBjYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgSW5ib3hBY3Rpb25zLkZldGNoLFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZmV0Y2hOb3RpZmljYXRpb25zRm9yVXNlcklkZW50aWZpZXIoXG4gICAgdXNlcklkZW50aWZpZXI6IHN0cmluZyxcbiAgICBhdXRoZW50aWNhdGlvbktleTogc3RyaW5nLFxuICAgIGNhbGxiYWNrOiAoXG4gICAgICBlcnJvcj86IEVycm9yLFxuICAgICAgbm90aWZpY2F0aW9ucz86IEJhdGNoU0RLLkluYm94Tm90aWZpY2F0aW9uW11cbiAgICApID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgc2VuZFRvQnJpZGdlKFxuICAgICAgcmVzID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVGZXRjaENhbGxiYWNrKHJlcywgY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIEluYm94QWN0aW9ucy5GZXRjaEZvclVzZXJJRCxcbiAgICAgIFt7IGlkOiB1c2VySWRlbnRpZmllciwgYXV0aDogYXV0aGVudGljYXRpb25LZXkgfV1cbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVGZXRjaENhbGxiYWNrKFxuICAgIHJhd1Jlc3BvbnNlOiBzdHJpbmcsXG4gICAgdXNlckNhbGxiYWNrOiAoXG4gICAgICBlcnJvcj86IEVycm9yLFxuICAgICAgbm90aWZpY2F0aW9ucz86IEJhdGNoU0RLLkluYm94Tm90aWZpY2F0aW9uW11cbiAgICApID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB1c2VyQ2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcImNhbGxiYWNrIGlzIGEgcmVxdWlyZWQgcGFyYW1ldGVyLCBhbmQgbXVzdCBiZSBhIGZ1bmN0aW9uXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3BvbnNlOiBhbnk7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyYXdSZXNwb25zZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdXNlckNhbGxiYWNrKG5ldyBFcnJvcihcIkludGVybmFsIGJyaWRnZSBlcnJvclwiKSwgdW5kZWZpbmVkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNTdHJpbmcocmVzcG9uc2UuZXJyb3IpKSB7XG4gICAgICB1c2VyQ2FsbGJhY2sobmV3IEVycm9yKHJlc3BvbnNlLmVycm9yKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmF3Tm90aWZpY2F0aW9ucyA9IHJlc3BvbnNlLm5vdGlmaWNhdGlvbnM7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHJhd05vdGlmaWNhdGlvbnMpKSB7XG4gICAgICB1c2VyQ2FsbGJhY2sobmV3IEVycm9yKFwiSW50ZXJuYWwgZXJyb3I6IG1hbGZvcm1lZCBub3RpZmljYXRpb25zXCIpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RpZmljYXRpb25zOiBCYXRjaFNESy5JbmJveE5vdGlmaWNhdGlvbltdID0gW107XG4gICAgcmF3Tm90aWZpY2F0aW9ucy5mb3JFYWNoKHJhd05vdGlmID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5vdGlmaWNhdGlvbnMucHVzaCh0aGlzLnBhcnNlQnJpZGdlTm90aWZpY2F0aW9uKHJhd05vdGlmKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIFRPRE86IERlYnVnIGxvZz9cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHVzZXJDYWxsYmFjayh1bmRlZmluZWQsIG5vdGlmaWNhdGlvbnMpO1xuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZUJyaWRnZU5vdGlmaWNhdGlvbihub3RpZjogYW55KTogQmF0Y2hTREsuSW5ib3hOb3RpZmljYXRpb24ge1xuICAgIGlmICh0eXBlb2Ygbm90aWYgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJhdyBub3RpZmljYXRpb24gaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gbm90aWYuYm9keTtcbiAgICBpZiAoIWlzU3RyaW5nKG5vdGlmLmJvZHkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiBJbmJveCBOb3RpZmljYXRpb24gbXVzdCBhdCBsZWFzdCBoYXZlIGEgYm9keVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBpZGVudGlmaWVyID0gbm90aWYuaWRlbnRpZmllcjtcbiAgICBpZiAoIWlzU3RyaW5nKG5vdGlmLmlkZW50aWZpZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiBJbmJveCBOb3RpZmljYXRpb24gbXVzdCBhdCBsZWFzdCBoYXZlIGFuIGlkZW50aWZpZXJcIik7XG4gICAgfVxuXG4gICAgY29uc3QgcmF3RGF0ZSA9IG5vdGlmLmRhdGU7IC8vIHRzIGluIG1zXG4gICAgaWYgKCFpc051bWJlcihyYXdEYXRlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQW4gSW5ib3ggTm90aWZpY2F0aW9uIG11c3QgYXQgbGVhc3QgaGF2ZSBhIGRhdGVcIik7XG4gICAgfVxuXG4gICAgY29uc3QgaXNVbnJlYWQgPSBub3RpZi5pc191bnJlYWQ7XG4gICAgaWYgKHR5cGVvZiBpc1VucmVhZCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFuIEluYm94IE5vdGlmaWNhdGlvbiBtdXN0IGF0IGxlYXN0IGhhdmUgYSByZWFkIGZsYWdcIik7XG4gICAgfVxuXG4gICAgbGV0IHNvdXJjZSA9IG5vdGlmLnNvdXJjZTtcbiAgICBpZiAoIWlzTnVtYmVyKHNvdXJjZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFuIEluYm94IE5vdGlmaWNhdGlvbiBtdXN0IGF0IGxlYXN0IGhhdmUgYSBzb3VyY2VcIik7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHNvdXJjZSAhPT0gSW5ib3hOb3RpZmljYXRpb25Tb3VyY2UuQ0FNUEFJR04gJiZcbiAgICAgIHNvdXJjZSAhPT0gSW5ib3hOb3RpZmljYXRpb25Tb3VyY2UuVFJBTlNBQ1RJT05BTCAmJlxuICAgICAgc291cmNlICE9PSBJbmJveE5vdGlmaWNhdGlvblNvdXJjZS5VTktOT1dOXG4gICAgKSB7XG4gICAgICBzb3VyY2UgPSBJbmJveE5vdGlmaWNhdGlvblNvdXJjZS5VTktOT1dOO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcnNlZE5vdGlmOiBCYXRjaFNESy5JbmJveE5vdGlmaWNhdGlvbiA9IHtcbiAgICAgIGJvZHksXG4gICAgICBkYXRlOiBuZXcgRGF0ZShyYXdEYXRlKSxcbiAgICAgIGlkZW50aWZpZXIsXG4gICAgICBpc1VucmVhZCxcbiAgICAgIHBheWxvYWQ6IHt9LFxuICAgICAgc291cmNlXG4gICAgfTtcblxuICAgIGlmIChpc1N0cmluZyhub3RpZi5pb3NfYXR0YWNobWVudF91cmwpKSB7XG4gICAgICBwYXJzZWROb3RpZi5pT1NBdHRhY2htZW50VVJMID0gbm90aWYuaW9zX2F0dGFjaG1lbnRfdXJsO1xuICAgIH1cblxuICAgIC8vIFRPRE86IG1ha2Ugc3VyZSBpdCdzIHVuaWZvcm0gd2l0aCBiYXRjaFB1c2hSZWNlaXZlZFxuICAgIGlmICh0eXBlb2Ygbm90aWYucGF5bG9hZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcGFyc2VkTm90aWYucGF5bG9hZCA9IG5vdGlmLnBheWxvYWQ7XG4gICAgfVxuXG4gICAgaWYgKGlzU3RyaW5nKG5vdGlmLnRpdGxlKSkge1xuICAgICAgcGFyc2VkTm90aWYudGl0bGUgPSBub3RpZi50aXRsZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyc2VkTm90aWY7XG4gIH1cbn1cbiIsImltcG9ydCB7IEludGVybmFsIGFzIEludGVybmFsQWN0aW9ucyB9IGZyb20gXCIuL2FjdGlvbnNcIjtcbmltcG9ydCB7IENvbnN0cyB9IGZyb20gXCIuL2NvbnN0c1wiO1xuaW1wb3J0IHsgaXNTdHJpbmcsIHdyaXRlQmF0Y2hMb2cgfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbmV4cG9ydCBlbnVtIENhbGxiYWNrQWN0aW9uIHtcbiAgTG9nID0gXCJfbG9nXCIsXG4gIEV2YWwgPSBcIl9ldmFsXCIsXG4gIERpc3BhdGNoUHVzaCA9IFwiX2Rpc3BhdGNoUHVzaFwiLFxuICBEaXNwYXRjaE1lc3NhZ2luZ0V2ZW50ID0gXCJfZGlzcGF0Y2hNZXNzYWdpbmdFdmVudFwiLFxuICBPbkJyaWRnZUZhaWx1cmUgPSBcIm9uQnJpZGdlRmFpbHVyZVwiXG59XG5cbmludGVyZmFjZSBJQ2FsbGJhY2tEaXNwYXRjaFB1c2hEYXRhIHtcbiAgYWN0aW9uOiBDYWxsYmFja0FjdGlvbi5EaXNwYXRjaFB1c2g7XG4gIHBheWxvYWQ6IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIGhhc0xhbmRpbmdNZXNzYWdlPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIElDYWxsYmFja0Rpc3BhdGNoTWVzc2FnaW5nRXZlbnREYXRhIHtcbiAgYWN0aW9uOiBDYWxsYmFja0FjdGlvbi5EaXNwYXRjaE1lc3NhZ2luZ0V2ZW50O1xuICBsaWZlY3ljbGVFdmVudDogc3RyaW5nO1xuICBtZXNzYWdlSWRlbnRpZmllcj86IHN0cmluZyB8IG51bGw7XG59XG5cbmludGVyZmFjZSBJQ2FsbGJhY2tMb2dEYXRhIHtcbiAgYWN0aW9uOiBDYWxsYmFja0FjdGlvbi5Mb2c7XG4gIG1lc3NhZ2U6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIElDYWxsYmFja0V2YWxEYXRhIHtcbiAgYWN0aW9uOiBDYWxsYmFja0FjdGlvbi5FdmFsO1xuICBjb21tYW5kOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBJQ2FsbGJhY2tPbkJyaWRnZUZhaWx1cmVEYXRhIHtcbiAgYWN0aW9uOiBDYWxsYmFja0FjdGlvbi5PbkJyaWRnZUZhaWx1cmU7XG4gIHJlc3VsdDogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tIYW5kbGVyIHtcbiAgcHVibGljIHNldHVwKCkge1xuICAgIC8vIERvbid0IGNhbGwgc2VuZFRvQnJpZGdlIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byBoYXZlIHRoZSBCQV8gcHJlZml4XG4gICAgY29yZG92YS5leGVjKFxuICAgICAgdGhpcy5oYW5kbGVDYWxsYmFjayxcbiAgICAgICgpID0+IHt9LFxuICAgICAgQ29uc3RzLkJhdGNoUGx1Z2luTmFtZSxcbiAgICAgIEludGVybmFsQWN0aW9ucy5TZXR1cENhbGxiYWNrLFxuICAgICAgW3t9XVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNhbGxiYWNrKFxuICAgIGNhbGxiYWNrRGF0YTpcbiAgICAgIHwgSUNhbGxiYWNrRGlzcGF0Y2hQdXNoRGF0YVxuICAgICAgfCBJQ2FsbGJhY2tEaXNwYXRjaE1lc3NhZ2luZ0V2ZW50RGF0YVxuICAgICAgfCBJQ2FsbGJhY2tMb2dEYXRhXG4gICAgICB8IElDYWxsYmFja0V2YWxEYXRhXG4gICAgICB8IElDYWxsYmFja09uQnJpZGdlRmFpbHVyZURhdGFcbiAgKSB7XG4gICAgaWYgKGNhbGxiYWNrRGF0YS5hY3Rpb24gIT09IENhbGxiYWNrQWN0aW9uLkxvZykge1xuICAgICAgd3JpdGVCYXRjaExvZyh0cnVlLCBcIkdvdCBjYWxsYmFjayBmcm9tIEJhdGNoXCIsIGNhbGxiYWNrRGF0YSk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChjYWxsYmFja0RhdGEuYWN0aW9uKSB7XG4gICAgICBjYXNlIENhbGxiYWNrQWN0aW9uLkRpc3BhdGNoUHVzaDpcbiAgICAgICAgY29uc3QgcHVzaFBheWxvYWQgPSBjYWxsYmFja0RhdGEucGF5bG9hZDtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHVzaFBheWxvYWQpIHtcbiAgICAgICAgICBpZiAocHVzaFBheWxvYWQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwdXNoUGF5bG9hZFtrZXldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHB1c2hQYXlsb2FkW2tleV0gPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QgKGFuZCBhbiBhcnJheSBpcyBhbiBvYmplY3QpLCByb2xsYmFja1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHVzaFBheWxvYWRba2V5XSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgcHVzaFBheWxvYWRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gRGVjb2RpbmcgSlNPTiBjYW4gZmFpbCBvbiBzdHJpbmdzIHRoYXQgYXJlbid0IG1lYW50IHRvIGJlIG9iamVjdHMsXG4gICAgICAgICAgICAgICAgLy8gc28gc2lsZW50bHkgaWdub3JlIHRoaXNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiIHx8XG4gICAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCJcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBwdXNoUGF5bG9hZFtrZXldID0gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGFzTGFuZGluZ01lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKGNhbGxiYWNrRGF0YS5oYXNMYW5kaW5nTWVzc2FnZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGhhc0xhbmRpbmdNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIChjb3Jkb3ZhIGFzIGFueSkuZmlyZURvY3VtZW50RXZlbnQoXCJiYXRjaFB1c2hSZWNlaXZlZFwiLCB7XG4gICAgICAgICAgaGFzTGFuZGluZ01lc3NhZ2UsXG4gICAgICAgICAgcGF5bG9hZDogcHVzaFBheWxvYWRcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDYWxsYmFja0FjdGlvbi5EaXNwYXRjaE1lc3NhZ2luZ0V2ZW50OlxuICAgICAgICBjb25zdCBsaWZlY3ljbGVFdmVudE5hbWUgPSBjYWxsYmFja0RhdGEubGlmZWN5Y2xlRXZlbnQ7XG4gICAgICAgIGxldCBwdWJsaWNFdmVudE5hbWU6IHN0cmluZztcblxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZTp0cmlwbGUtZXF1YWxzXG4gICAgICAgIGlmIChcInNob3duXCIgPT0gbGlmZWN5Y2xlRXZlbnROYW1lKSB7XG4gICAgICAgICAgcHVibGljRXZlbnROYW1lID0gXCJiYXRjaE1lc3NhZ2VTaG93blwiO1xuICAgICAgICB9IGVsc2UgaWYgKFwiY2xvc2VkXCIgPT0gbGlmZWN5Y2xlRXZlbnROYW1lKSB7XG4gICAgICAgICAgcHVibGljRXZlbnROYW1lID0gXCJiYXRjaE1lc3NhZ2VDbG9zZWRcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3cml0ZUJhdGNoTG9nKFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIFwiVW5rbm93biBtZXNzYWdpbmcgbGlmZWN5Y2xlIGV2ZW50LCBjYW4ndCBmb3J3YXJkXCIsXG4gICAgICAgICAgICBjYWxsYmFja0RhdGEubGlmZWN5Y2xlRXZlbnRcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRzbGludDplbmFibGU6dHJpcGxlLWVxdWFsc1xuXG4gICAgICAgIGNvbnN0IHBheWxvYWQ6IGFueSA9IHt9O1xuXG4gICAgICAgIGlmIChpc1N0cmluZyhjYWxsYmFja0RhdGEubWVzc2FnZUlkZW50aWZpZXIpKSB7XG4gICAgICAgICAgcGF5bG9hZC5tZXNzYWdlSWRlbnRpZmllciA9IGNhbGxiYWNrRGF0YS5tZXNzYWdlSWRlbnRpZmllcjtcbiAgICAgICAgfVxuXG4gICAgICAgIChjb3Jkb3ZhIGFzIGFueSkuZmlyZURvY3VtZW50RXZlbnQocHVibGljRXZlbnROYW1lLCBwYXlsb2FkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENhbGxiYWNrQWN0aW9uLkxvZzpcbiAgICAgICAgLy8gRG9uJ3QgdXNlIHdyaXRlQmF0Y2hMb2cgb24gcHVycG9zZVxuICAgICAgICBjb25zb2xlLmxvZyhjYWxsYmFja0RhdGEubWVzc2FnZSk7IC8vIHRzbGludDpkaXNhYmxlLWxpbmVcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENhbGxiYWNrQWN0aW9uLkV2YWw6XG4gICAgICAgIC8vIFRoaXMgY2FzZSBpcyBiZWNhdXNlIENvcmRvdmEgQW5kcm9pZCdzIGV2YWxqcyBpcyBkZXByZWNhdGVkLlxuICAgICAgICAvLyBVc2luZyBhIGNhbGxiYWNrIHRvIGV2YWwgaXMgdGhlaXIgcmVjb21tZW5kZWQgc29sdXRpb25cbiAgICAgICAgZXZhbChjYWxsYmFja0RhdGEuY29tbWFuZCk7IC8vIHRzbGludDpkaXNhYmxlLWxpbmVcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENhbGxiYWNrQWN0aW9uLk9uQnJpZGdlRmFpbHVyZTpcbiAgICAgICAgLy8gdG9kbzogY2hlY2sgdGhhdCBjb25zdCdzIHZhbHVlXG4gICAgICAgIHdyaXRlQmF0Y2hMb2coZmFsc2UsIFwiSW50ZXJuYWwgQnJpZGdlIGVycm9yXCIsIGNhbGxiYWNrRGF0YS5yZXN1bHQpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEluYm94Tm90aWZpY2F0aW9uU291cmNlIH0gZnJvbSBcIi4vbW9kdWxlcy9pbmJveFwiO1xuaW1wb3J0IHsgQW5kcm9pZE5vdGlmaWNhdGlvblR5cGVzLCBpT1NOb3RpZmljYXRpb25UeXBlcyB9IGZyb20gXCIuL21vZHVsZXMvcHVzaFwiO1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1jb25zb2xlICovXG5cbmNsYXNzIE1lc3NhZ2luZ1N0dWIgaW1wbGVtZW50cyBCYXRjaFNESy5NZXNzYWdpbmdNb2R1bGUge1xuICBwdWJsaWMgc2V0RG9Ob3REaXN0dXJiRW5hYmxlZChlbmFibGVkOiBib29sZWFuKSB7fVxuICBwdWJsaWMgc2hvd1BlbmRpbmdNZXNzYWdlKCkge31cbn1cblxuY2xhc3MgUHVzaFN0dWIgaW1wbGVtZW50cyBCYXRjaFNESy5QdXNoTW9kdWxlIHtcbiAgcHVibGljIEFuZHJvaWROb3RpZmljYXRpb25UeXBlczogdHlwZW9mIEFuZHJvaWROb3RpZmljYXRpb25UeXBlcztcbiAgcHVibGljIGlPU05vdGlmaWNhdGlvblR5cGVzOiB0eXBlb2YgaU9TTm90aWZpY2F0aW9uVHlwZXM7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5BbmRyb2lkTm90aWZpY2F0aW9uVHlwZXMgPSBBbmRyb2lkTm90aWZpY2F0aW9uVHlwZXM7XG4gICAgdGhpcy5pT1NOb3RpZmljYXRpb25UeXBlcyA9IGlPU05vdGlmaWNhdGlvblR5cGVzO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyRm9yUmVtb3RlTm90aWZpY2F0aW9ucygpIHt9XG4gIHB1YmxpYyBzZXRBbmRyb2lkTm90aWZpY2F0aW9uVHlwZXMobm90aWZUeXBlczogYW55KSB7fVxuICBwdWJsaWMgc2V0aU9TTm90aWZpY2F0aW9uVHlwZXMobm90aWZUeXBlczogYW55KSB7fVxuICBwdWJsaWMgY2xlYXJCYWRnZSgpIHt9XG4gIHB1YmxpYyBkaXNtaXNzTm90aWZpY2F0aW9ucygpIHt9XG4gIHB1YmxpYyBnZXRMYXN0S25vd25QdXNoVG9rZW4ocmVzdWx0Q2FsbGJhY2s6ICh0b2tlbjogc3RyaW5nKSA9PiB2b2lkKSB7fVxufVxuXG5jbGFzcyBVc2VyU3R1YiBpbXBsZW1lbnRzIEJhdGNoU0RLLlVzZXJNb2R1bGUge1xuICBwdWJsaWMgZ2V0SW5zdGFsbGF0aW9uSUQocmVzdWx0Q2FsbGJhY2s6IChpbnN0YWxsYXRpb25JRDogc3RyaW5nKSA9PiB2b2lkKSB7fVxuICBwdWJsaWMgZ2V0RWRpdG9yKCk6IEJhdGNoU0RLLkJhdGNoVXNlckRhdGFFZGl0b3Ige1xuICAgIHJldHVybiBuZXcgQmF0Y2hVc2VyRGF0YUVkaXRvclN0dWIoKTtcbiAgfVxuICBwdWJsaWMgcHJpbnREZWJ1Z0luZm9ybWF0aW9uKCkge31cbiAgcHVibGljIHRyYWNrRXZlbnQoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGxhYmVsPzogc3RyaW5nLFxuICAgIGRhdGE/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9XG4gICkge31cbiAgcHVibGljIHRyYWNrVHJhbnNhY3Rpb24oYW1vdW50OiBudW1iZXIsIGRhdGE/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7fVxuICBwdWJsaWMgdHJhY2tMb2NhdGlvbihsb2NhdGlvbjogQmF0Y2hTREsuTG9jYXRpb24pOiB2b2lkIHt9XG59XG5cbmNsYXNzIEluYm94U3R1YiBpbXBsZW1lbnRzIEJhdGNoU0RLLkluYm94TW9kdWxlIHtcbiAgcHVibGljIE5vdGlmaWNhdGlvblNvdXJjZTogdHlwZW9mIEluYm94Tm90aWZpY2F0aW9uU291cmNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuTm90aWZpY2F0aW9uU291cmNlID0gSW5ib3hOb3RpZmljYXRpb25Tb3VyY2U7XG4gIH1cblxuICBwdWJsaWMgZmV0Y2hOb3RpZmljYXRpb25zKFxuICAgIGNhbGxiYWNrOiAoXG4gICAgICBlcnJvcj86IEVycm9yLFxuICAgICAgbm90aWZpY2F0aW9ucz86IEJhdGNoU0RLLkluYm94Tm90aWZpY2F0aW9uW11cbiAgICApID0+IHZvaWRcbiAgKSB7fVxuICBwdWJsaWMgZmV0Y2hOb3RpZmljYXRpb25zRm9yVXNlcklkZW50aWZpZXIoXG4gICAgdXNlcklkZW50aWZpZXI6IHN0cmluZyxcbiAgICBhdXRoZW50aWNhdGlvbktleTogc3RyaW5nLFxuICAgIGNhbGxiYWNrOiAoXG4gICAgICBlcnJvcj86IEVycm9yLFxuICAgICAgbm90aWZpY2F0aW9ucz86IEJhdGNoU0RLLkluYm94Tm90aWZpY2F0aW9uW11cbiAgICApID0+IHZvaWRcbiAgKSB7fVxufVxuXG5jbGFzcyBCYXRjaFVzZXJEYXRhRWRpdG9yU3R1YiBpbXBsZW1lbnRzIEJhdGNoU0RLLkJhdGNoVXNlckRhdGFFZGl0b3Ige1xuICBwdWJsaWMgc2V0TGFuZ3VhZ2UobGFuZ3VhZ2U6IHN0cmluZyB8IG51bGwpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBwdWJsaWMgc2V0UmVnaW9uKHJlZ2lvbjogc3RyaW5nIHwgbnVsbCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHB1YmxpYyBzZXRJZGVudGlmaWVyKGlkZW50aWZpZXI6IHN0cmluZyB8IG51bGwpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBwdWJsaWMgc2V0QXR0cmlidXRlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IERhdGUpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBwdWJsaWMgcmVtb3ZlQXR0cmlidXRlKGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcHVibGljIGNsZWFyQXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBwdWJsaWMgYWRkVGFnKGNvbGxlY3Rpb246IHN0cmluZywgdGFnOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBwdWJsaWMgcmVtb3ZlVGFnKGNvbGxlY3Rpb246IHN0cmluZywgdGFnOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBwdWJsaWMgY2xlYXJUYWdzKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHB1YmxpYyBjbGVhclRhZ0NvbGxlY3Rpb24oY29sbGVjdGlvbjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcHVibGljIHNhdmUoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuY2xhc3MgQmF0Y2hTdHViIGltcGxlbWVudHMgQmF0Y2hTREsuQmF0Y2gge1xuICBwdWJsaWMgcHVzaDogQmF0Y2hTREsuUHVzaE1vZHVsZTtcbiAgcHVibGljIHVzZXI6IEJhdGNoU0RLLlVzZXJNb2R1bGU7XG4gIHB1YmxpYyBtZXNzYWdpbmc6IEJhdGNoU0RLLk1lc3NhZ2luZ01vZHVsZTtcbiAgcHVibGljIGluYm94OiBCYXRjaFNESy5JbmJveE1vZHVsZTtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wdXNoID0gbmV3IFB1c2hTdHViKCk7XG4gICAgdGhpcy51c2VyID0gbmV3IFVzZXJTdHViKCk7XG4gICAgdGhpcy5tZXNzYWdpbmcgPSBuZXcgTWVzc2FnaW5nU3R1YigpO1xuICAgIHRoaXMuaW5ib3ggPSBuZXcgSW5ib3hTdHViKCk7XG4gIH1cbiAgcHVibGljIG9uKFxuICAgIGV2ZW50OiBzdHJpbmcsXG4gICAgbGlzdGVuZXI6IChldmVudE5hbWU6IHN0cmluZywgcGFyYW1ldGVyczogYW55KSA9PiB2b2lkXG4gICkge31cbiAgcHVibGljIG9mZihldmVudD86IHN0cmluZykge31cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEJhdGNoU0RLLkNvbmZpZykge31cbiAgcHVibGljIHN0YXJ0KCkge1xuICAgIGNvbnNvbGUubG9nKFwiQmF0Y2ggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25lbWVudFwiKTtcbiAgfVxuICBwdWJsaWMgb3B0SW4oKSB7fVxuICBwdWJsaWMgb3B0T3V0KCkge31cbiAgcHVibGljIG9wdE91dEFuZFdpcGVEYXRhKCkge31cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmF0Y2hTdHViO1xuIiwiaW1wb3J0IHsgVXNlciBhcyBVc2VyQWN0aW9uLCBVc2VyRGF0YU9wZXJhdGlvbiB9IGZyb20gXCIuLi9hY3Rpb25zXCI7XG5pbXBvcnQgeyBpc051bWJlciwgaXNTdHJpbmcsIHNlbmRUb0JyaWRnZSwgd3JpdGVCYXRjaExvZyB9IGZyb20gXCIuLi9oZWxwZXJzXCI7XG5cbmltcG9ydCBDb25zdHMgZnJvbSBcIi4uL2NvbnN0c1wiO1xuXG5leHBvcnQgY2xhc3MgVXNlck1vZHVsZSBpbXBsZW1lbnRzIFVzZXJNb2R1bGUge1xuICBwdWJsaWMgZ2V0SW5zdGFsbGF0aW9uSUQocmVzdWx0Q2FsbGJhY2s6IChpbnN0YWxsYXRpb25JRDogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgc2VuZFRvQnJpZGdlKHJlc3VsdENhbGxiYWNrLCBVc2VyQWN0aW9uLkdldEluc3RhbGxhdGlvbklELCBudWxsKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRFZGl0b3IoKTogQmF0Y2hVc2VyRGF0YUVkaXRvciB7XG4gICAgcmV0dXJuIG5ldyBCYXRjaFVzZXJEYXRhRWRpdG9yKHRydWUpO1xuICB9XG5cbiAgcHVibGljIHByaW50RGVidWdJbmZvcm1hdGlvbigpIHtcbiAgICBzZW5kVG9CcmlkZ2UobnVsbCwgVXNlckFjdGlvbi5EYXRhRGVidWcsIG51bGwpO1xuICB9XG5cbiAgcHVibGljIHRyYWNrRXZlbnQoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGxhYmVsPzogc3RyaW5nLFxuICAgIGRhdGE/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9XG4gICkge1xuICAgIGlmICghaXNTdHJpbmcobmFtZSkgfHwgIUNvbnN0cy5BdHRyaWJ1dGVLZXlSZWdleHAudGVzdChuYW1lIHx8IFwiXCIpKSB7XG4gICAgICB3cml0ZUJhdGNoTG9nKFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgXCJCYXRjaFVzZXIgLSBJbnZhbGlkIGV2ZW50IG5hbWUuIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCB0aGUgbmFtZSBpcyBtYWRlIG9mIGxldHRlcnMsIHVuZGVyc2NvcmVzIGFuZCBudW1iZXJzIG9ubHkgKGEtekEtWjAtOV8pLiBJdCBhbHNvIGNhbid0IGJlIGxvbmdlciB0aGFuIDMwIGNoYXJhY3RlcnMuIElnbm9yaW5nIGV2ZW50ICdcIiArXG4gICAgICAgICAgbmFtZSArXG4gICAgICAgICAgXCInXCJcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGFyYW1ldGVyczogYW55ID0geyBuYW1lIH07XG5cbiAgICBpZiAoaXNTdHJpbmcobGFiZWwpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGxhYmVsLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBsYWJlbC5sZW5ndGggPiBDb25zdHMuQXR0cmlidXRlU3RyaW5nTWF4TGVuZ3RoXG4gICAgICApIHtcbiAgICAgICAgd3JpdGVCYXRjaExvZyhcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBMYWJlbCBjYW4ndCBiZSBsb25nZXIgdGhhbiBcIiArXG4gICAgICAgICAgICBDb25zdHMuQXR0cmlidXRlU3RyaW5nTWF4TGVuZ3RoICtcbiAgICAgICAgICAgIFwiIGNoYXJhY3RlcnMuIElnbm9yaW5nIGV2ZW50ICdcIiArXG4gICAgICAgICAgICBuYW1lICtcbiAgICAgICAgICAgIFwiJy5cIlxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwYXJhbWV0ZXJzLmxhYmVsID0gbGFiZWw7XG4gICAgfSBlbHNlIGlmIChsYWJlbCAhPSBudWxsICYmIHR5cGVvZiBsYWJlbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgd3JpdGVCYXRjaExvZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFwiQmF0Y2hVc2VyIC0gSWYgc3VwcGxpZWQsIGxhYmVsIGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcuIElnbm9yaW5nIGV2ZW50ICdcIiArXG4gICAgICAgICAgbmFtZSArXG4gICAgICAgICAgXCInLlwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcGFyYW1ldGVycy5kYXRhID0gZGF0YTtcbiAgICB9XG5cbiAgICBzZW5kVG9CcmlkZ2UobnVsbCwgVXNlckFjdGlvbi5UcmFja0V2ZW50LCBbcGFyYW1ldGVyc10pO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHVibGljIHRyYWNrVHJhbnNhY3Rpb24oYW1vdW50OiBudW1iZXIsIGRhdGE/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gICAgaWYgKHR5cGVvZiBhbW91bnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlciAtIEFtb3VudCBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyLiBJZ25vcmluZyB0cmFuc2FjdGlvbi5cIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWlzTnVtYmVyKGFtb3VudCkgfHwgaXNOYU4oYW1vdW50KSkge1xuICAgICAgd3JpdGVCYXRjaExvZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFwiQmF0Y2hVc2VyIC0gQW1vdW50IG11c3QgYmUgYSB2YWxpZCBudW1iZXIuIElnbm9yaW5nIHRyYW5zYWN0aW9uLlwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtZXRlcnM6IGFueSA9IHsgYW1vdW50IH07XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHBhcmFtZXRlcnMuZGF0YSA9IGRhdGE7XG4gICAgfVxuXG4gICAgc2VuZFRvQnJpZGdlKG51bGwsIFVzZXJBY3Rpb24uVHJhY2tUcmFuc2FjdGlvbiwgW3BhcmFtZXRlcnNdKTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIHB1YmxpYyB0cmFja0xvY2F0aW9uKGxvY2F0aW9uOiBCYXRjaFNESy5Mb2NhdGlvbikge1xuICAgIGlmICh0eXBlb2YgbG9jYXRpb24gIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlciAtIEludmFsaWQgdHJhY2tMb2NhdGlvbiBhcmd1bWVudC4gU2tpcHBpbmcuXCJcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBsb2NhdGlvbi5sYXRpdHVkZSAhPT0gXCJudW1iZXJcIiB8fCBpc05hTihsb2NhdGlvbi5sYXRpdHVkZSkpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coZmFsc2UsIFwiQmF0Y2hVc2VyIC0gSW52YWxpZCBsYXRpdHVkZS4gU2tpcHBpbmcuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbG9jYXRpb24ubG9uZ2l0dWRlICE9PSBcIm51bWJlclwiIHx8IGlzTmFOKGxvY2F0aW9uLmxvbmdpdHVkZSkpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coZmFsc2UsIFwiQmF0Y2hVc2VyIC0gSW52YWxpZCBsb25naXR1ZGUuIFNraXBwaW5nLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBsb2NhdGlvbi5wcmVjaXNpb24gJiZcbiAgICAgICh0eXBlb2YgbG9jYXRpb24ucHJlY2lzaW9uICE9PSBcIm51bWJlclwiIHx8IGlzTmFOKGxvY2F0aW9uLnByZWNpc2lvbikpXG4gICAgKSB7XG4gICAgICB3cml0ZUJhdGNoTG9nKGZhbHNlLCBcIkJhdGNoVXNlciAtIEludmFsaWQgcHJlY2lzaW9uLiBTa2lwcGluZy5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGxvY2F0aW9uLmRhdGUgJiYgIShsb2NhdGlvbi5kYXRlIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coZmFsc2UsIFwiQmF0Y2hVc2VyIC0gSW52YWxpZCBkYXRlLiBTa2lwcGluZy5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2VuZFRvQnJpZGdlKG51bGwsIFVzZXJBY3Rpb24uVHJhY2tMb2NhdGlvbiwgW1xuICAgICAge1xuICAgICAgICBkYXRlOiBsb2NhdGlvbi5kYXRlID8gbG9jYXRpb24uZGF0ZS5nZXRUaW1lKCkgOiB1bmRlZmluZWQsXG4gICAgICAgIGxhdGl0dWRlOiBsb2NhdGlvbi5sYXRpdHVkZSxcbiAgICAgICAgbG9uZ2l0dWRlOiBsb2NhdGlvbi5sb25naXR1ZGUsXG4gICAgICAgIHByZWNpc2lvbjogbG9jYXRpb24ucHJlY2lzaW9uXG4gICAgICB9XG4gICAgXSk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIElPcGVyYXRpb24ge1xuICBvcGVyYXRpb246IFVzZXJEYXRhT3BlcmF0aW9uO1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbmV4cG9ydCBjbGFzcyBCYXRjaFVzZXJEYXRhRWRpdG9yIGltcGxlbWVudHMgQmF0Y2hVc2VyRGF0YUVkaXRvciB7XG4gIHByaXZhdGUgX29wZXJhdGlvblF1ZXVlOiBJT3BlcmF0aW9uW107IC8vIHRzbGludDpkaXNhYmxlLWxpbmVcblxuICBjb25zdHJ1Y3Rvcihmcm9tU2RrOiBib29sZWFuKSB7XG4gICAgaWYgKGZyb21TZGsgIT09IHRydWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJEbyBub3QgaW5zdGFuY2lhdGUgQmF0Y2hVc2VyRGF0YUVkaXRvciB5b3Vyc2VsZjogdXNlIGJhdGNoLnVzZXIuZ2V0RWRpdG9yKClcIlxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5fb3BlcmF0aW9uUXVldWUgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRMYW5ndWFnZShsYW5ndWFnZTogc3RyaW5nIHwgbnVsbCkge1xuICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2UgIT09IFwic3RyaW5nXCIgJiYgbGFuZ3VhZ2UgIT09IG51bGwpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBMYW5ndWFnZSBtdXN0IGJlIGEgc3RyaW5nIG9yIG51bGxcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMuX2VucXVldWVPcGVyYXRpb24oVXNlckRhdGFPcGVyYXRpb24uU2V0TGFuZ3VhZ2UsIHtcbiAgICAgIHZhbHVlOiBsYW5ndWFnZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgc2V0UmVnaW9uKHJlZ2lvbjogc3RyaW5nIHwgbnVsbCkge1xuICAgIGlmICh0eXBlb2YgcmVnaW9uICE9PSBcInN0cmluZ1wiICYmIHJlZ2lvbiAhPT0gbnVsbCkge1xuICAgICAgd3JpdGVCYXRjaExvZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFwiQmF0Y2hVc2VyRGF0YUVkaXRvciAtIFJlZ2lvbiBtdXN0IGJlIGEgc3RyaW5nIG9yIG51bGxcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMuX2VucXVldWVPcGVyYXRpb24oVXNlckRhdGFPcGVyYXRpb24uU2V0UmVnaW9uLCB7XG4gICAgICB2YWx1ZTogcmVnaW9uXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBzZXRJZGVudGlmaWVyKGlkZW50aWZpZXI6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIGlkZW50aWZpZXIgIT09IFwic3RyaW5nXCIgJiYgaWRlbnRpZmllciAhPT0gbnVsbCkge1xuICAgICAgd3JpdGVCYXRjaExvZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFwiQmF0Y2hVc2VyRGF0YUVkaXRvciAtIElkZW50aWZpZXIgbXVzdCBiZSBhIHN0cmluZyBvciBudWxsXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB0aGlzLl9lbnF1ZXVlT3BlcmF0aW9uKFVzZXJEYXRhT3BlcmF0aW9uLlNldElkZW50aWZpZXIsIHtcbiAgICAgIHZhbHVlOiBpZGVudGlmaWVyXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBzZXRBdHRyaWJ1dGUoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgRGF0ZSkge1xuICAgIGlmICghQ29uc3RzLkF0dHJpYnV0ZUtleVJlZ2V4cC50ZXN0KGtleSB8fCBcIlwiKSkge1xuICAgICAgd3JpdGVCYXRjaExvZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFwiQmF0Y2hVc2VyRGF0YUVkaXRvciAtIEludmFsaWQga2V5LiBQbGVhc2UgbWFrZSBzdXJlIHRoYXQgdGhlIGtleSBpcyBtYWRlIG9mIGxldHRlcnMsIHVuZGVyc2NvcmVzIGFuZCBudW1iZXJzIG9ubHkgKGEtekEtWjAtOV8pLiBJdCBhbHNvIGNhbid0IGJlIGxvbmdlciB0aGFuIDMwIGNoYXJhY3RlcnMuIElnbm9yaW5nIGF0dHJpYnV0ZSAnXCIgK1xuICAgICAgICAgIGtleSArXG4gICAgICAgICAgXCInXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGtleSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBrZXkgPT09IG51bGwpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBWYWx1ZSBhcmd1bWVudCBjYW5ub3QgYmUgdW5kZWZpbmVkIG9yIG51bGxcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coZmFsc2UsIFwiQmF0Y2hVc2VyRGF0YUVkaXRvciAtIEEgdmFsdWUgaXMgcmVxdWlyZWRcIik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBvcGVyYXRpb25EYXRhID0geyB2YWx1ZSwga2V5LCB0eXBlOiBcIlwiIH07XG5cbiAgICAvLyBMZXRzIGd1ZXNzIHRoZSB0eXBlXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgLy8gSXQncyBhIGRhdGUsIHlheVxuICAgICAgb3BlcmF0aW9uRGF0YS52YWx1ZSA9IHZhbHVlLmdldFRpbWUoKTtcbiAgICAgIG9wZXJhdGlvbkRhdGEudHlwZSA9IFwiZGF0ZVwiO1xuICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgICBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgICAgIHdyaXRlQmF0Y2hMb2coZmFsc2UsIFwiQmF0Y2hVc2VyRGF0YUVkaXRvciAtIFZhbHVlIGNhbm5vdCBiZSBOYU5cIik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgb3BlcmF0aW9uRGF0YS50eXBlID0gKHZhbHVlIGFzIG51bWJlcikgJSAxID09PSAwID8gXCJpbnRlZ2VyXCIgOiBcImZsb2F0XCI7XG4gICAgfSBlbHNlIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdmFsdWUubGVuZ3RoID09PSAwIHx8XG4gICAgICAgIHZhbHVlLmxlbmd0aCA+IENvbnN0cy5BdHRyaWJ1dGVTdHJpbmdNYXhMZW5ndGhcbiAgICAgICkge1xuICAgICAgICB3cml0ZUJhdGNoTG9nKFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIFwiQmF0Y2hVc2VyRGF0YUVkaXRvciAtIFN0cmluZyBhdHRyaWJ1dGVzIGNhbid0IGJlIGVtcHR5IG9yIGxvbmdlciB0aGFuIFwiICtcbiAgICAgICAgICAgIENvbnN0cy5BdHRyaWJ1dGVTdHJpbmdNYXhMZW5ndGggK1xuICAgICAgICAgICAgXCIgY2hhcmFjdGVycy4gSWdub3JpbmcgYXR0cmlidXRlICdcIiArXG4gICAgICAgICAgICBrZXkgK1xuICAgICAgICAgICAgXCInLlwiXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgb3BlcmF0aW9uRGF0YS50eXBlID0gXCJzdHJpbmdcIjtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgKHZhbHVlIGFzIGFueSkgaW5zdGFuY2VvZiBCb29sZWFuIHx8XG4gICAgICB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiXG4gICAgKSB7XG4gICAgICBvcGVyYXRpb25EYXRhLnR5cGUgPSBcImJvb2xlYW5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgd3JpdGVCYXRjaExvZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFwiQmF0Y2hVc2VyRGF0YUVkaXRvciAtIFZhbHVlIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHRoZXNlIHR5cGVzOiBudW1iZXIsIHN0cmluZywgYm9vbGVhbiwgZGF0ZVwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGhpcy5fZW5xdWV1ZU9wZXJhdGlvbihVc2VyRGF0YU9wZXJhdGlvbi5TZXRBdHRyaWJ1dGUsIG9wZXJhdGlvbkRhdGEpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlQXR0cmlidXRlKGtleTogc3RyaW5nKSB7XG4gICAgaWYgKCFDb25zdHMuQXR0cmlidXRlS2V5UmVnZXhwLnRlc3Qoa2V5IHx8IFwiXCIpKSB7XG4gICAgICB3cml0ZUJhdGNoTG9nKFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgXCJCYXRjaFVzZXJEYXRhRWRpdG9yIC0gSW52YWxpZCBrZXkuIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCB0aGUga2V5IGlzIG1hZGUgb2YgbGV0dGVycywgdW5kZXJzY29yZXMgYW5kIG51bWJlcnMgb25seSAoYS16QS1aMC05XykuIEl0IGFsc28gY2FuJ3QgYmUgbG9uZ2VyIHRoYW4gMzAgY2hhcmFjdGVycy4gSWdub3JpbmcgYXR0cmlidXRlICdcIiArXG4gICAgICAgICAga2V5ICtcbiAgICAgICAgICBcIidcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMuX2VucXVldWVPcGVyYXRpb24oVXNlckRhdGFPcGVyYXRpb24uUmVtb3ZlQXR0cmlidXRlLCB7XG4gICAgICBrZXlcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIGNsZWFyQXR0cmlidXRlcygpIHtcbiAgICB0aGlzLl9lbnF1ZXVlT3BlcmF0aW9uKFVzZXJEYXRhT3BlcmF0aW9uLkNsZWFyQXR0cmlidXRlLCB7fSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBhZGRUYWcoY29sbGVjdGlvbjogc3RyaW5nLCB0YWc6IHN0cmluZykge1xuICAgIGlmICghaXNTdHJpbmcoY29sbGVjdGlvbikpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBDb2xsZWN0aW9uIGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmdcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICghQ29uc3RzLkF0dHJpYnV0ZUtleVJlZ2V4cC50ZXN0KGNvbGxlY3Rpb24gfHwgXCJcIikpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBJbnZhbGlkIGNvbGxlY3Rpb24uIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCB0aGUgY29sbGVjdGlvbiBpcyBtYWRlIG9mIGxldHRlcnMsIHVuZGVyc2NvcmVzIGFuZCBudW1iZXJzIG9ubHkgKGEtekEtWjAtOV8pLiBJdCBhbHNvIGNhbid0IGJlIGxvbmdlciB0aGFuIDMwIGNoYXJhY3RlcnMuIElnbm9yaW5nIGNvbGxlY3Rpb24gJ1wiICtcbiAgICAgICAgICBjb2xsZWN0aW9uICtcbiAgICAgICAgICBcIidcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGFnID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB3cml0ZUJhdGNoTG9nKGZhbHNlLCBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBBIHRhZyBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmIChpc1N0cmluZyh0YWcpKSB7XG4gICAgICBpZiAodGFnLmxlbmd0aCA9PT0gMCB8fCB0YWcubGVuZ3RoID4gQ29uc3RzLkF0dHJpYnV0ZVN0cmluZ01heExlbmd0aCkge1xuICAgICAgICB3cml0ZUJhdGNoTG9nKFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIFwiQmF0Y2hVc2VyRGF0YUVkaXRvciAtIFRhZ3MgY2FuJ3QgYmUgZW1wdHkgb3IgbG9uZ2VyIHRoYW4gXCIgK1xuICAgICAgICAgICAgQ29uc3RzLkF0dHJpYnV0ZVN0cmluZ01heExlbmd0aCArXG4gICAgICAgICAgICBcIiBjaGFyYWN0ZXJzLiBJZ25vcmluZyB0YWcgJ1wiICtcbiAgICAgICAgICAgIHRhZyArXG4gICAgICAgICAgICBcIicuXCJcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBUYWcgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZ1wiXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGhpcy5fZW5xdWV1ZU9wZXJhdGlvbihVc2VyRGF0YU9wZXJhdGlvbi5BZGRUYWcsIHtcbiAgICAgIGNvbGxlY3Rpb24sXG4gICAgICB0YWdcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZVRhZyhjb2xsZWN0aW9uOiBzdHJpbmcsIHRhZzogc3RyaW5nKSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGNvbGxlY3Rpb24gIT09IFwic3RyaW5nXCIgJiZcbiAgICAgICEoKGNvbGxlY3Rpb24gYXMgYW55KSBpbnN0YW5jZW9mIFN0cmluZylcbiAgICApIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBDb2xsZWN0aW9uIGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmdcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICghQ29uc3RzLkF0dHJpYnV0ZUtleVJlZ2V4cC50ZXN0KGNvbGxlY3Rpb24gfHwgXCJcIikpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBJbnZhbGlkIGNvbGxlY3Rpb24uIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCB0aGUgY29sbGVjdGlvbiBpcyBtYWRlIG9mIGxldHRlcnMsIHVuZGVyc2NvcmVzIGFuZCBudW1iZXJzIG9ubHkgKGEtekEtWjAtOV8pLiBJdCBhbHNvIGNhbid0IGJlIGxvbmdlciB0aGFuIDMwIGNoYXJhY3RlcnMuIElnbm9yaW5nIGNvbGxlY3Rpb24gJ1wiICtcbiAgICAgICAgICBjb2xsZWN0aW9uICtcbiAgICAgICAgICBcIidcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGFnID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB3cml0ZUJhdGNoTG9nKGZhbHNlLCBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBBIHRhZyBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmIChpc1N0cmluZyh0YWcpKSB7XG4gICAgICBpZiAodGFnLmxlbmd0aCA9PT0gMCB8fCB0YWcubGVuZ3RoID4gQ29uc3RzLkF0dHJpYnV0ZVN0cmluZ01heExlbmd0aCkge1xuICAgICAgICB3cml0ZUJhdGNoTG9nKFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIFwiQmF0Y2hVc2VyRGF0YUVkaXRvciAtIFRhZ3MgY2FuJ3QgYmUgZW1wdHkgb3IgbG9uZ2VyIHRoYW4gXCIgK1xuICAgICAgICAgICAgQ29uc3RzLkF0dHJpYnV0ZVN0cmluZ01heExlbmd0aCArXG4gICAgICAgICAgICBcIiBjaGFyYWN0ZXJzLiBJZ25vcmluZyB0YWcgJ1wiICtcbiAgICAgICAgICAgIHRhZyArXG4gICAgICAgICAgICBcIicuXCJcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBUYWcgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZ1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuX2VucXVldWVPcGVyYXRpb24oVXNlckRhdGFPcGVyYXRpb24uUmVtb3ZlVGFnLCB7XG4gICAgICBjb2xsZWN0aW9uLFxuICAgICAgdGFnXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBjbGVhclRhZ3MoKSB7XG4gICAgdGhpcy5fZW5xdWV1ZU9wZXJhdGlvbihVc2VyRGF0YU9wZXJhdGlvbi5DbGVhclRhZ3MsIHt9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIGNsZWFyVGFnQ29sbGVjdGlvbihjb2xsZWN0aW9uOiBzdHJpbmcpIHtcbiAgICBpZiAodHlwZW9mIGNvbGxlY3Rpb24gIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBDb2xsZWN0aW9uIGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmdcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICghQ29uc3RzLkF0dHJpYnV0ZUtleVJlZ2V4cC50ZXN0KGNvbGxlY3Rpb24gfHwgXCJcIikpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoVXNlckRhdGFFZGl0b3IgLSBJbnZhbGlkIGNvbGxlY3Rpb24uIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCB0aGUgY29sbGVjdGlvbiBpcyBtYWRlIG9mIGxldHRlcnMsIHVuZGVyc2NvcmVzIGFuZCBudW1iZXJzIG9ubHkgKGEtekEtWjAtOV8pLiBJdCBhbHNvIGNhbid0IGJlIGxvbmdlciB0aGFuIDMwIGNoYXJhY3RlcnMuIElnbm9yaW5nIGNvbGxlY3Rpb24gJ1wiICtcbiAgICAgICAgICBjb2xsZWN0aW9uICtcbiAgICAgICAgICBcIidcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMuX2VucXVldWVPcGVyYXRpb24oVXNlckRhdGFPcGVyYXRpb24uQ2xlYXJUYWdDb2xsZWN0aW9uLCB7XG4gICAgICBjb2xsZWN0aW9uXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBzYXZlKCkge1xuICAgIHNlbmRUb0JyaWRnZShudWxsLCBVc2VyQWN0aW9uLkVkaXQsIFtcbiAgICAgIHtcbiAgICAgICAgb3BlcmF0aW9uczogdGhpcy5fb3BlcmF0aW9uUXVldWVcbiAgICAgIH1cbiAgICBdKTtcblxuICAgIHRoaXMuX29wZXJhdGlvblF1ZXVlID0gW107XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZS5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIG9wZXJhdGlvbiBPcGVyYXRpb24gbmFtZSB0byBhZGRcbiAgICogQHBhcmFtIGFyZ3MgT3BlcmF0aW9uIGFyZ3VtZW50cyBvYmplY3RcbiAgICovXG4gIHByaXZhdGUgX2VucXVldWVPcGVyYXRpb24oXG4gICAgb3BlcmF0aW9uOiBVc2VyRGF0YU9wZXJhdGlvbixcbiAgICBhcmdzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9XG4gICkge1xuICAgIGNvbnN0IG9wZXJhdGlvbk9iamVjdCA9IHtcbiAgICAgIG9wZXJhdGlvbixcbiAgICAgIC4uLmFyZ3NcbiAgICB9O1xuXG4gICAgdGhpcy5fb3BlcmF0aW9uUXVldWUucHVzaChvcGVyYXRpb25PYmplY3QpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBNZXNzYWdpbmcgYXMgTWVzc2FnaW5nQWN0aW9ucyB9IGZyb20gXCIuLi9hY3Rpb25zXCI7XG5pbXBvcnQgeyBzZW5kVG9CcmlkZ2UsIHdyaXRlQmF0Y2hMb2cgfSBmcm9tIFwiLi4vaGVscGVyc1wiO1xuXG5leHBvcnQgY2xhc3MgTWVzc2FnaW5nTW9kdWxlIGltcGxlbWVudHMgTWVzc2FnaW5nTW9kdWxlIHtcbiAgcHVibGljIHNldERvTm90RGlzdHVyYkVuYWJsZWQoZW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICh0eXBlb2YgZW5hYmxlZCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkJhdGNoLk1lc3NhZ2luZyAtIHNldERvTm90RGlzdHVyYkVuYWJsZWQ6IHBhcmFtZXRlciBtdXN0IGJlIGEgYm9vbGVhblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZW5kVG9CcmlkZ2UobnVsbCwgTWVzc2FnaW5nQWN0aW9ucy5TZXREb05vdERpc3R1cmJFbmFibGVkLCBbeyBlbmFibGVkIH1dKTtcbiAgfVxuXG4gIHB1YmxpYyBzaG93UGVuZGluZ01lc3NhZ2UoKTogdm9pZCB7XG4gICAgc2VuZFRvQnJpZGdlKG51bGwsIE1lc3NhZ2luZ0FjdGlvbnMuU2hvd1BlbmRpbmdNZXNzYWdlLCBudWxsKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgd3JpdGVCYXRjaExvZyB9IGZyb20gXCIuL2hlbHBlcnNcIjtcblxuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBSZWdpc3RlcmVkIGV2ZW50IGxpc3RlbmVyc1xuICAgKi9cbiAgcHJpdmF0ZSBfZXZlbnRMaXN0ZW5lcnM6IHsgW2tleTogc3RyaW5nXTogQmF0Y2hTREsuQmF0Y2hFdmVudENhbGxiYWNrW10gfTsgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2V2ZW50TGlzdGVuZXJzID0ge307XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuIE11bHRpcGxlIGxpc3RlbmVycyBjYW4gYmUgc2V0IG9uIGFuIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IG5hbWUgdG8gbGlzdGVuIHRvLlxuICAgKiBAcGFyYW0gbGlzdGVuZXIgRnVuY3Rpb24gd2l0aCB0d28gYXJndW1lbnRzIDogZXZlbnQgbmFtZSBhbmQgcGFyYW1ldGVycy5cbiAgICovXG4gIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogQmF0Y2hTREsuQmF0Y2hFdmVudENhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBldmVudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgd3JpdGVCYXRjaExvZyhmYWxzZSwgXCJFdmVudCBuYW1lIG11c3QgYmUgYSBzdHJpbmcgaWYgc3VwcGxpZWRcIik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBNYWtlIHN1cmUgdGhpcyBleGlzdHNcbiAgICB0aGlzLl9ldmVudExpc3RlbmVyc1tldmVudF0gPSB0aGlzLl9ldmVudExpc3RlbmVyc1tldmVudF0gfHwgW107XG5cbiAgICB0aGlzLl9ldmVudExpc3RlbmVyc1tldmVudF0ucHVzaChsaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnJlZ2lzdGVycyBhbGwgbGlzdGVuZXJzIGZvciBhIGdpdmVuIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IG5hbWUgeW91IHdpc2ggdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lciBmb3IuIElmIG5vdGhpbmcgaXMgcHJvdmlkZWQsIGFsbCBldmVudHMgYXJlIHJlbW92ZWQuXG4gICAqL1xuICBwdWJsaWMgb2ZmKGV2ZW50Pzogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiBldmVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5fZXZlbnRMaXN0ZW5lcnMgPSB7fTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGV2ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB3cml0ZUJhdGNoTG9nKGZhbHNlLCBcIkV2ZW50IG5hbWUgbXVzdCBiZSBhIHN0cmluZyBpZiBzdXBwbGllZFwiKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0aGlzLl9ldmVudExpc3RlbmVyc1tldmVudF0gPSBbXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBFbWl0IGFuIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgZW1pdChldmVudDogc3RyaW5nLCBwYXJhbWV0ZXJzOiBhbnkpIHtcbiAgICB3cml0ZUJhdGNoTG9nKFxuICAgICAgdHJ1ZSxcbiAgICAgIFwiQ2FsbGluZyBiYWNrIGRldmVsb3BlciBpbXBsZW1lbnRhdGlvbiAtIFwiICsgZXZlbnQsXG4gICAgICBwYXJhbWV0ZXJzXG4gICAgKTtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudExpc3RlbmVyc1tldmVudF0gfHwgW107XG4gICAgbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4ge1xuICAgICAgbGlzdGVuZXIoZXZlbnQsIHBhcmFtZXRlcnMpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb3JlIGFzIENvcmVBY3Rpb25zIH0gZnJvbSBcIi4vYWN0aW9uc1wiO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSBcIi4vZXZlbnRFbWl0dGVyXCI7XG5pbXBvcnQgeyBzZW5kVG9CcmlkZ2UsIHdyaXRlQmF0Y2hMb2cgfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5pbXBvcnQgeyBJbmJveE1vZHVsZSB9IGZyb20gXCIuL21vZHVsZXMvaW5ib3hcIjtcbmltcG9ydCB7IE1lc3NhZ2luZ01vZHVsZSB9IGZyb20gXCIuL21vZHVsZXMvbWVzc2FnaW5nXCI7XG5pbXBvcnQgeyBQdXNoTW9kdWxlIH0gZnJvbSBcIi4vbW9kdWxlcy9wdXNoXCI7XG5pbXBvcnQgeyBVc2VyTW9kdWxlIH0gZnJvbSBcIi4vbW9kdWxlcy91c2VyXCI7XG5pbXBvcnQgUGxhdGZvcm0gZnJvbSBcIi4vcGxhdGZvcm1cIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmF0Y2ggaW1wbGVtZW50cyBCYXRjaFNESy5CYXRjaCB7XG4gIHB1YmxpYyBwdXNoOiBQdXNoTW9kdWxlO1xuICBwdWJsaWMgdXNlcjogVXNlck1vZHVsZTtcbiAgcHVibGljIG1lc3NhZ2luZzogTWVzc2FnaW5nTW9kdWxlO1xuICBwdWJsaWMgaW5ib3g6IEluYm94TW9kdWxlO1xuXG4gIHByaXZhdGUgX2NvbmZpZzogQmF0Y2hTREsuQ29uZmlnIHwgbnVsbDsgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuICBwcml2YXRlIF9ldmVudEVtaXR0ZXI6IEV2ZW50RW1pdHRlcjsgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucHVzaCA9IG5ldyBQdXNoTW9kdWxlKCk7XG4gICAgdGhpcy51c2VyID0gbmV3IFVzZXJNb2R1bGUoKTtcbiAgICB0aGlzLm1lc3NhZ2luZyA9IG5ldyBNZXNzYWdpbmdNb2R1bGUoKTtcbiAgICB0aGlzLmluYm94ID0gbmV3IEluYm94TW9kdWxlKCk7XG5cbiAgICB0aGlzLl9jb25maWcgPSBudWxsO1xuICAgIHRoaXMuX2V2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogQmF0Y2hTREsuQmF0Y2hFdmVudENhbGxiYWNrKSB7XG4gICAgdGhpcy5fZXZlbnRFbWl0dGVyLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gIH1cblxuICBwdWJsaWMgb2ZmKGV2ZW50Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5fZXZlbnRFbWl0dGVyLm9mZihldmVudCk7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogQmF0Y2hTREsuQ29uZmlnKSB7XG4gICAgaWYgKHR5cGVvZiBjb25maWcgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHdyaXRlQmF0Y2hMb2coZmFsc2UsIFwiQ29uZmlnIG11c3QgYmUgYW4gb2JqZWN0LlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBVc2UgYSBiYXNlIGNvbmZpZ1xuICAgIGNvbnN0IGJhc2VDb25maWc6IEJhdGNoU0RLLkNvbmZpZyA9IHtcbiAgICAgIGFuZHJvaWRBUElLZXk6IG51bGwsXG4gICAgICBjYW5Vc2VBZHZlcnRpc2luZ0lkZW50aWZpZXI6IHRydWUsXG4gICAgICBpT1NBUElLZXk6IG51bGxcbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoYmFzZUNvbmZpZy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIChiYXNlQ29uZmlnIGFzIGFueSlba2V5XSA9IChjb25maWcgYXMgYW55KVtrZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2coZmFsc2UsIFwiVW5rbm93biBrZXkgZm91bmQgaW4gdGhlIGNvbmZpZyBvYmplY3QgOiBcIiArIGtleSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gYmFzZUNvbmZpZztcbiAgfVxuXG4gIHB1YmxpYyBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5fY29uZmlnID09PSBudWxsKSB7XG4gICAgICB3cml0ZUJhdGNoTG9nKGZhbHNlLCBcIllvdSBtdXN0IGNhbGwgc2V0Q29uZmlnIGJlZm9yZSBjYWxsaW5nIHN0YXJ0LlwiKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNvbnN0IGFwaUtleSA9IFBsYXRmb3JtLmlzQ3VycmVudChQbGF0Zm9ybS5BbmRyb2lkKVxuICAgICAgPyB0aGlzLl9jb25maWcuYW5kcm9pZEFQSUtleVxuICAgICAgOiB0aGlzLl9jb25maWcuaU9TQVBJS2V5O1xuICAgIGlmICh0eXBlb2YgYXBpS2V5ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB3cml0ZUJhdGNoTG9nKFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgXCJObyBBUEkga2V5IHdhcyBzcGVjaWZpZWQgZm9yIHRoZSBjdXJyZW50IHBsYXRmb3JtLlwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgY29uZmlnIGZpcnN0XG4gICAgc2VuZFRvQnJpZGdlKG51bGwsIENvcmVBY3Rpb25zLlNldENvbmZpZywgW1xuICAgICAge1xuICAgICAgICBBUElLZXk6IGFwaUtleSxcbiAgICAgICAgdXNlQW5kcm9pZElEOiBmYWxzZSxcbiAgICAgICAgdXNlSURGQTogdGhpcy5fY29uZmlnLmNhblVzZUFkdmVydGlzaW5nSWRlbnRpZmllciA9PT0gdHJ1ZVxuICAgICAgfVxuICAgIF0pO1xuXG4gICAgc2VuZFRvQnJpZGdlKG51bGwsIENvcmVBY3Rpb25zLlN0YXJ0LCBudWxsKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBwdWJsaWMgb3B0SW4oKSB7XG4gICAgc2VuZFRvQnJpZGdlKG51bGwsIENvcmVBY3Rpb25zLk9wdEluLCBudWxsKTtcbiAgfVxuXG4gIHB1YmxpYyBvcHRPdXQoKSB7XG4gICAgc2VuZFRvQnJpZGdlKG51bGwsIENvcmVBY3Rpb25zLk9wdE91dCwgbnVsbCk7XG4gIH1cblxuICBwdWJsaWMgb3B0T3V0QW5kV2lwZURhdGEoKSB7XG4gICAgc2VuZFRvQnJpZGdlKG51bGwsIENvcmVBY3Rpb25zLk9wdE91dFdpcGVEYXRhLCBudWxsKTtcbiAgfVxuXG4gIHByaXZhdGUgbG9nKGRlYnVnOiBib29sZWFuLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIHdyaXRlQmF0Y2hMb2coZGVidWcsIC4uLmFyZ3MpO1xuICB9XG59XG4iLCJpbXBvcnQgYmF0Y2ggZnJvbSBcIi4vYmF0Y2hcIjtcbmltcG9ydCBiYXRjaFN0dWIgZnJvbSBcIi4vYmF0Y2hTdHViXCI7XG5pbXBvcnQgeyBDYWxsYmFja0hhbmRsZXIgfSBmcm9tIFwiLi9jYWxsYmFja1wiO1xuaW1wb3J0IFBsYXRmb3JtIGZyb20gXCIuL3BsYXRmb3JtXCI7XG5cbmxldCBiYXRjaEltcGw6IEJhdGNoU0RLLkJhdGNoO1xuaWYgKFBsYXRmb3JtLmlzQ3VycmVudChQbGF0Zm9ybS5pT1MpIHx8IFBsYXRmb3JtLmlzQ3VycmVudChQbGF0Zm9ybS5BbmRyb2lkKSkge1xuICBiYXRjaEltcGwgPSBuZXcgYmF0Y2goKTtcbiAgLy8gVE9ETzogY2hlY2sgaWYgdGhpcyB3b3JrcyBvciBpZiB3ZSBuZWVkIHRvIHJldGFpbiB0aGUgY2xhc3NcbiAgbmV3IENhbGxiYWNrSGFuZGxlcigpLnNldHVwKCk7XG59IGVsc2Uge1xuICBiYXRjaEltcGwgPSBuZXcgYmF0Y2hTdHViKCk7XG59XG5cbmV4cG9ydCA9IGJhdGNoSW1wbDtcbiJdLCJzb3VyY2VSb290IjoiIn0=